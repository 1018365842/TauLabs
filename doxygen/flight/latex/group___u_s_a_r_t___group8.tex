\hypertarget{group___u_s_a_r_t___group8}{\section{Smartcard mode functions}
\label{group___u_s_a_r_t___group8}\index{Smartcard mode functions@{Smartcard mode functions}}
}


Smartcard mode functions.  


\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___u_s_a_r_t___group8_gac4a35c6acd71ae7e0d67c1f03f0a8777}{U\-S\-A\-R\-T\-\_\-\-Set\-Guard\-Time} (\hyperlink{struct_u_s_a_r_t___type_def}{U\-S\-A\-R\-T\-\_\-\-Type\-Def} $\ast$U\-S\-A\-R\-Tx, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} U\-S\-A\-R\-T\-\_\-\-Guard\-Time)
\begin{DoxyCompactList}\small\item\em Sets the specified U\-S\-A\-R\-T guard time. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___u_s_a_r_t___group8_gabd1347e244c623447151ba3a5e986c5f}{U\-S\-A\-R\-T\-\_\-\-Smart\-Card\-Cmd} (\hyperlink{struct_u_s_a_r_t___type_def}{U\-S\-A\-R\-T\-\_\-\-Type\-Def} $\ast$U\-S\-A\-R\-Tx, \hyperlink{group___exported__types_gac9a7e9a35d2513ec15c3b537aaa4fba1}{Functional\-State} New\-State)
\begin{DoxyCompactList}\small\item\em Enables or disables the U\-S\-A\-R\-T's Smart Card mode. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___u_s_a_r_t___group8_ga62e22f47e38aa53f2edce8771f7a5dfa}{U\-S\-A\-R\-T\-\_\-\-Smart\-Card\-N\-A\-C\-K\-Cmd} (\hyperlink{struct_u_s_a_r_t___type_def}{U\-S\-A\-R\-T\-\_\-\-Type\-Def} $\ast$U\-S\-A\-R\-Tx, \hyperlink{group___exported__types_gac9a7e9a35d2513ec15c3b537aaa4fba1}{Functional\-State} New\-State)
\begin{DoxyCompactList}\small\item\em Enables or disables N\-A\-C\-K transmission. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___u_s_a_r_t___group8_ga177f89c993d6a79a3dd9f0c9a64c491d}{U\-S\-A\-R\-T\-\_\-\-Set\-Auto\-Retry\-Count} (\hyperlink{struct_u_s_a_r_t___type_def}{U\-S\-A\-R\-T\-\_\-\-Type\-Def} $\ast$U\-S\-A\-R\-Tx, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} U\-S\-A\-R\-T\-\_\-\-Auto\-Count)
\begin{DoxyCompactList}\small\item\em Sets the Smart Card number of retries in transmit and receive. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___u_s_a_r_t___group8_ga4bf41428cd24cc85730497adb8b64879}{U\-S\-A\-R\-T\-\_\-\-Set\-Block\-Length} (\hyperlink{struct_u_s_a_r_t___type_def}{U\-S\-A\-R\-T\-\_\-\-Type\-Def} $\ast$U\-S\-A\-R\-Tx, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} U\-S\-A\-R\-T\-\_\-\-Block\-Length)
\begin{DoxyCompactList}\small\item\em Sets the Smart Card Block length. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___u_s_a_r_t___group8_ga902857f199ebfba21c63d725354af66f}{U\-S\-A\-R\-T\-\_\-\-D\-M\-A\-Cmd} (\hyperlink{struct_u_s_a_r_t___type_def}{U\-S\-A\-R\-T\-\_\-\-Type\-Def} $\ast$U\-S\-A\-R\-Tx, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\-\_\-t} U\-S\-A\-R\-T\-\_\-\-D\-M\-A\-Req, \hyperlink{group___exported__types_gac9a7e9a35d2513ec15c3b537aaa4fba1}{Functional\-State} New\-State)
\begin{DoxyCompactList}\small\item\em Enables or disables the U\-S\-A\-R\-T's D\-M\-A interface. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Smartcard mode functions. D\-M\-A transfers management functions.

\begin{DoxyVerb} ===============================================================================
                     ##### Smartcard mode functions #####
 ===============================================================================
    [..] This subsection provides a set of functions allowing to manage the USART
         Smartcard communication.
    [..] The Smartcard interface is designed to support asynchronous protocol 
         Smartcards as defined in the ISO 7816-3 standard. The USART can provide 
         a clock to the smartcard through the SCLK output. In smartcard mode, 
         SCLK is not associated to the communication but is simply derived from 
         the internal peripheral input clock through a 5-bit prescaler.
    [..] Smartcard communication is possible through the following procedure:
         (#) Configures the Smartcard Prsecaler using the USART_SetPrescaler() 
             function.
         (#) Configures the Smartcard Guard Time using the USART_SetGuardTime() 
             function.
         (#) Program the USART clock using the USART_ClockInit() function as following:
             (++) USART Clock enabled.
             (++) USART CPOL Low.
             (++) USART CPHA on first edge.
             (++) USART Last Bit Clock Enabled.
         (#) Program the Smartcard interface using the USART_Init() function as 
             following:
             (++) Word Length = 9 Bits.
             (++) 1.5 Stop Bit.
             (++) Even parity.
             (++) BaudRate = 12096 baud.
             (++) Hardware flow control disabled (RTS and CTS signals).
             (++) Tx and Rx enabled
         (#) Optionally you can enable the parity error interrupt using 
             the USART_ITConfig() function.
         (#) Enable the Smartcard NACK using the USART_SmartCardNACKCmd() function.
         (#) Enable the Smartcard interface using the USART_SmartCardCmd() function.
         (#) Enable the USART using the USART_Cmd() function.
    [..] 
  Please refer to the ISO 7816-3 specification for more details.
    [..] 
         (@) It is also possible to choose 0.5 stop bit for receiving but it is 
             recommended to use 1.5 stop bits for both transmitting and receiving 
             to avoid switching between the two configurations.
         (@) In smartcard mode, the following bits must be kept cleared:
             (+@) LINEN bit in the USART_CR2 register.
             (+@) HDSEL and IREN bits in the USART_CR3 register.\end{DoxyVerb}


\begin{DoxyVerb} ===============================================================================
                      DMA transfers management functions
 ===============================================================================  \end{DoxyVerb}
 

\subsection{Function Documentation}
\hypertarget{group___u_s_a_r_t___group8_ga902857f199ebfba21c63d725354af66f}{\index{Smartcard mode functions@{Smartcard mode functions}!U\-S\-A\-R\-T\-\_\-\-D\-M\-A\-Cmd@{U\-S\-A\-R\-T\-\_\-\-D\-M\-A\-Cmd}}
\index{U\-S\-A\-R\-T\-\_\-\-D\-M\-A\-Cmd@{U\-S\-A\-R\-T\-\_\-\-D\-M\-A\-Cmd}!Smartcard mode functions@{Smartcard mode functions}}
\subsubsection[{U\-S\-A\-R\-T\-\_\-\-D\-M\-A\-Cmd}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} U\-S\-A\-R\-T\-\_\-\-D\-M\-A\-Cmd (
\begin{DoxyParamCaption}
\item[{{\bf U\-S\-A\-R\-T\-\_\-\-Type\-Def} $\ast$}]{U\-S\-A\-R\-Tx, }
\item[{{\bf uint16\-\_\-t}}]{U\-S\-A\-R\-T\-\_\-\-D\-M\-A\-Req, }
\item[{{\bf Functional\-State}}]{New\-State}
\end{DoxyParamCaption}
)}}\label{group___u_s_a_r_t___group8_ga902857f199ebfba21c63d725354af66f}


Enables or disables the U\-S\-A\-R\-T's D\-M\-A interface. 

Enables or disables the U\-S\-A\-R\-T’s D\-M\-A interface.


\begin{DoxyParams}{Parameters}
{\em U\-S\-A\-R\-Tx,\-:} & where x can be 1, 2, 3, 4, 5 or 6 to select the U\-S\-A\-R\-T or U\-A\-R\-T peripheral. \\
\hline
{\em U\-S\-A\-R\-T\-\_\-\-D\-M\-A\-Req,\-:} & specifies the D\-M\-A request. This parameter can be any combination of the following values\-: \begin{DoxyItemize}
\item U\-S\-A\-R\-T\-\_\-\-D\-M\-A\-Req\-\_\-\-Tx\-: U\-S\-A\-R\-T D\-M\-A transmit request \item U\-S\-A\-R\-T\-\_\-\-D\-M\-A\-Req\-\_\-\-Rx\-: U\-S\-A\-R\-T D\-M\-A receive request \end{DoxyItemize}
\\
\hline
{\em New\-State,\-:} & new state of the D\-M\-A Request sources. This parameter can be\-: E\-N\-A\-B\-L\-E or D\-I\-S\-A\-B\-L\-E. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line 1092 of file stm32f4xx\-\_\-usart.\-c.

\hypertarget{group___u_s_a_r_t___group8_ga177f89c993d6a79a3dd9f0c9a64c491d}{\index{Smartcard mode functions@{Smartcard mode functions}!U\-S\-A\-R\-T\-\_\-\-Set\-Auto\-Retry\-Count@{U\-S\-A\-R\-T\-\_\-\-Set\-Auto\-Retry\-Count}}
\index{U\-S\-A\-R\-T\-\_\-\-Set\-Auto\-Retry\-Count@{U\-S\-A\-R\-T\-\_\-\-Set\-Auto\-Retry\-Count}!Smartcard mode functions@{Smartcard mode functions}}
\subsubsection[{U\-S\-A\-R\-T\-\_\-\-Set\-Auto\-Retry\-Count}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} U\-S\-A\-R\-T\-\_\-\-Set\-Auto\-Retry\-Count (
\begin{DoxyParamCaption}
\item[{{\bf U\-S\-A\-R\-T\-\_\-\-Type\-Def} $\ast$}]{U\-S\-A\-R\-Tx, }
\item[{{\bf uint8\-\_\-t}}]{U\-S\-A\-R\-T\-\_\-\-Auto\-Count}
\end{DoxyParamCaption}
)}}\label{group___u_s_a_r_t___group8_ga177f89c993d6a79a3dd9f0c9a64c491d}


Sets the Smart Card number of retries in transmit and receive. 


\begin{DoxyParams}{Parameters}
{\em U\-S\-A\-R\-Tx,\-:} & Select the U\-S\-A\-R\-T peripheral. This parameter can be one of the following values\-: U\-S\-A\-R\-T1 or U\-S\-A\-R\-T2 or U\-S\-A\-R\-T3. \\
\hline
{\em U\-S\-A\-R\-T\-\_\-\-Auto\-Count,\-:} & specifies the Smart Card auto retry count. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line 1344 of file stm32f30x\-\_\-usart.\-c.

\hypertarget{group___u_s_a_r_t___group8_ga4bf41428cd24cc85730497adb8b64879}{\index{Smartcard mode functions@{Smartcard mode functions}!U\-S\-A\-R\-T\-\_\-\-Set\-Block\-Length@{U\-S\-A\-R\-T\-\_\-\-Set\-Block\-Length}}
\index{U\-S\-A\-R\-T\-\_\-\-Set\-Block\-Length@{U\-S\-A\-R\-T\-\_\-\-Set\-Block\-Length}!Smartcard mode functions@{Smartcard mode functions}}
\subsubsection[{U\-S\-A\-R\-T\-\_\-\-Set\-Block\-Length}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} U\-S\-A\-R\-T\-\_\-\-Set\-Block\-Length (
\begin{DoxyParamCaption}
\item[{{\bf U\-S\-A\-R\-T\-\_\-\-Type\-Def} $\ast$}]{U\-S\-A\-R\-Tx, }
\item[{{\bf uint8\-\_\-t}}]{U\-S\-A\-R\-T\-\_\-\-Block\-Length}
\end{DoxyParamCaption}
)}}\label{group___u_s_a_r_t___group8_ga4bf41428cd24cc85730497adb8b64879}


Sets the Smart Card Block length. 


\begin{DoxyParams}{Parameters}
{\em U\-S\-A\-R\-Tx,\-:} & Select the U\-S\-A\-R\-T peripheral. This parameter can be one of the following values\-: U\-S\-A\-R\-T1 or U\-S\-A\-R\-T2 or U\-S\-A\-R\-T3. \\
\hline
{\em U\-S\-A\-R\-T\-\_\-\-Block\-Length,\-:} & specifies the Smart Card block length. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line 1362 of file stm32f30x\-\_\-usart.\-c.

\hypertarget{group___u_s_a_r_t___group8_gac4a35c6acd71ae7e0d67c1f03f0a8777}{\index{Smartcard mode functions@{Smartcard mode functions}!U\-S\-A\-R\-T\-\_\-\-Set\-Guard\-Time@{U\-S\-A\-R\-T\-\_\-\-Set\-Guard\-Time}}
\index{U\-S\-A\-R\-T\-\_\-\-Set\-Guard\-Time@{U\-S\-A\-R\-T\-\_\-\-Set\-Guard\-Time}!Smartcard mode functions@{Smartcard mode functions}}
\subsubsection[{U\-S\-A\-R\-T\-\_\-\-Set\-Guard\-Time}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} U\-S\-A\-R\-T\-\_\-\-Set\-Guard\-Time (
\begin{DoxyParamCaption}
\item[{{\bf U\-S\-A\-R\-T\-\_\-\-Type\-Def} $\ast$}]{U\-S\-A\-R\-Tx, }
\item[{{\bf uint8\-\_\-t}}]{U\-S\-A\-R\-T\-\_\-\-Guard\-Time}
\end{DoxyParamCaption}
)}}\label{group___u_s_a_r_t___group8_gac4a35c6acd71ae7e0d67c1f03f0a8777}


Sets the specified U\-S\-A\-R\-T guard time. 


\begin{DoxyParams}{Parameters}
{\em U\-S\-A\-R\-Tx,\-:} & Select the U\-S\-A\-R\-T peripheral. This parameter can be one of the following values\-: U\-S\-A\-R\-T1 or U\-S\-A\-R\-T2 or U\-S\-A\-R\-T3. \\
\hline
{\em U\-S\-A\-R\-T\-\_\-\-Guard\-Time,\-:} & specifies the guard time. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line 1276 of file stm32f30x\-\_\-usart.\-c.

\hypertarget{group___u_s_a_r_t___group8_gabd1347e244c623447151ba3a5e986c5f}{\index{Smartcard mode functions@{Smartcard mode functions}!U\-S\-A\-R\-T\-\_\-\-Smart\-Card\-Cmd@{U\-S\-A\-R\-T\-\_\-\-Smart\-Card\-Cmd}}
\index{U\-S\-A\-R\-T\-\_\-\-Smart\-Card\-Cmd@{U\-S\-A\-R\-T\-\_\-\-Smart\-Card\-Cmd}!Smartcard mode functions@{Smartcard mode functions}}
\subsubsection[{U\-S\-A\-R\-T\-\_\-\-Smart\-Card\-Cmd}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} U\-S\-A\-R\-T\-\_\-\-Smart\-Card\-Cmd (
\begin{DoxyParamCaption}
\item[{{\bf U\-S\-A\-R\-T\-\_\-\-Type\-Def} $\ast$}]{U\-S\-A\-R\-Tx, }
\item[{{\bf Functional\-State}}]{New\-State}
\end{DoxyParamCaption}
)}}\label{group___u_s_a_r_t___group8_gabd1347e244c623447151ba3a5e986c5f}


Enables or disables the U\-S\-A\-R\-T's Smart Card mode. 

Enables or disables the U\-S\-A\-R\-T’s Smart Card mode.


\begin{DoxyParams}{Parameters}
{\em U\-S\-A\-R\-Tx,\-:} & Select the U\-S\-A\-R\-T peripheral. This parameter can be one of the following values\-: U\-S\-A\-R\-T1 or U\-S\-A\-R\-T2 or U\-S\-A\-R\-T3. \\
\hline
{\em New\-State,\-:} & new state of the Smart Card mode. This parameter can be\-: E\-N\-A\-B\-L\-E or D\-I\-S\-A\-B\-L\-E. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line 1295 of file stm32f30x\-\_\-usart.\-c.

\hypertarget{group___u_s_a_r_t___group8_ga62e22f47e38aa53f2edce8771f7a5dfa}{\index{Smartcard mode functions@{Smartcard mode functions}!U\-S\-A\-R\-T\-\_\-\-Smart\-Card\-N\-A\-C\-K\-Cmd@{U\-S\-A\-R\-T\-\_\-\-Smart\-Card\-N\-A\-C\-K\-Cmd}}
\index{U\-S\-A\-R\-T\-\_\-\-Smart\-Card\-N\-A\-C\-K\-Cmd@{U\-S\-A\-R\-T\-\_\-\-Smart\-Card\-N\-A\-C\-K\-Cmd}!Smartcard mode functions@{Smartcard mode functions}}
\subsubsection[{U\-S\-A\-R\-T\-\_\-\-Smart\-Card\-N\-A\-C\-K\-Cmd}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} U\-S\-A\-R\-T\-\_\-\-Smart\-Card\-N\-A\-C\-K\-Cmd (
\begin{DoxyParamCaption}
\item[{{\bf U\-S\-A\-R\-T\-\_\-\-Type\-Def} $\ast$}]{U\-S\-A\-R\-Tx, }
\item[{{\bf Functional\-State}}]{New\-State}
\end{DoxyParamCaption}
)}}\label{group___u_s_a_r_t___group8_ga62e22f47e38aa53f2edce8771f7a5dfa}


Enables or disables N\-A\-C\-K transmission. 


\begin{DoxyParams}{Parameters}
{\em U\-S\-A\-R\-Tx,\-:} & Select the U\-S\-A\-R\-T peripheral. This parameter can be one of the following values\-: U\-S\-A\-R\-T1 or U\-S\-A\-R\-T2 or U\-S\-A\-R\-T3. \\
\hline
{\em New\-State,\-:} & new state of the N\-A\-C\-K transmission. This parameter can be\-: E\-N\-A\-B\-L\-E or D\-I\-S\-A\-B\-L\-E. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line 1320 of file stm32f30x\-\_\-usart.\-c.

