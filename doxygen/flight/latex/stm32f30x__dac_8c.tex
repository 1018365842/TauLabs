\hypertarget{stm32f30x__dac_8c}{\section{/home/jose/\-Code/gui\-Tau/flight/\-Pi\-O\-S/\-S\-T\-M32\-F30x/\-Libraries/\-S\-T\-M32\-F30x\-\_\-\-Std\-Periph\-\_\-\-Driver/src/stm32f30x\-\_\-dac.c File Reference}
\label{stm32f30x__dac_8c}\index{/home/jose/\-Code/gui\-Tau/flight/\-Pi\-O\-S/\-S\-T\-M32\-F30x/\-Libraries/\-S\-T\-M32\-F30x\-\_\-\-Std\-Periph\-\_\-\-Driver/src/stm32f30x\-\_\-dac.\-c@{/home/jose/\-Code/gui\-Tau/flight/\-Pi\-O\-S/\-S\-T\-M32\-F30x/\-Libraries/\-S\-T\-M32\-F30x\-\_\-\-Std\-Periph\-\_\-\-Driver/src/stm32f30x\-\_\-dac.\-c}}
}


This file provides firmware functions to manage the following functionalities of the Digital-\/to-\/\-Analog Converter (D\-A\-C) peripheral\-:  


\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___d_a_c___group1_ga1fae225204e1e049d6795319e99ba8bc}{D\-A\-C\-\_\-\-De\-Init} (\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void})
\begin{DoxyCompactList}\small\item\em Deinitializes the D\-A\-C peripheral registers to their default reset values. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___d_a_c___group1_ga7c59850468ed4bf0659663fe495441da}{D\-A\-C\-\_\-\-Init} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-Channel, D\-A\-C\-\_\-\-Init\-Type\-Def $\ast$D\-A\-C\-\_\-\-Init\-Struct)
\begin{DoxyCompactList}\small\item\em Initializes the D\-A\-C peripheral according to the specified parameters in the D\-A\-C\-\_\-\-Init\-Struct. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___d_a_c___group1_gadfc270974d54cb5fa5f92556015c4046}{D\-A\-C\-\_\-\-Struct\-Init} (D\-A\-C\-\_\-\-Init\-Type\-Def $\ast$D\-A\-C\-\_\-\-Init\-Struct)
\begin{DoxyCompactList}\small\item\em Fills each D\-A\-C\-\_\-\-Init\-Struct member with its default value. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___d_a_c___group1_ga323e61530d7fa9396c3bce9edb61f733}{D\-A\-C\-\_\-\-Cmd} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-Channel, \hyperlink{group___exported__types_gac9a7e9a35d2513ec15c3b537aaa4fba1}{Functional\-State} New\-State)
\begin{DoxyCompactList}\small\item\em Enables or disables the specified D\-A\-C channel. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___d_a_c___group1_ga46f9f7f6b9520a86e300fe966afe5fb3}{D\-A\-C\-\_\-\-Software\-Trigger\-Cmd} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-Channel, \hyperlink{group___exported__types_gac9a7e9a35d2513ec15c3b537aaa4fba1}{Functional\-State} New\-State)
\begin{DoxyCompactList}\small\item\em Enables or disables the selected D\-A\-C channel software trigger. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___d_a_c___group1_gab4d3b364a6b184dcd65f3b294ebf56dc}{D\-A\-C\-\_\-\-Dual\-Software\-Trigger\-Cmd} (\hyperlink{group___exported__types_gac9a7e9a35d2513ec15c3b537aaa4fba1}{Functional\-State} New\-State)
\begin{DoxyCompactList}\small\item\em Enables or disables simultaneously the two D\-A\-C channels software triggers. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___d_a_c___group1_gabd51ae6880821d4dcd923969ec19a19e}{D\-A\-C\-\_\-\-Wave\-Generation\-Cmd} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-Channel, \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-Wave, \hyperlink{group___exported__types_gac9a7e9a35d2513ec15c3b537aaa4fba1}{Functional\-State} New\-State)
\begin{DoxyCompactList}\small\item\em Enables or disables the selected D\-A\-C channel wave generation. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___d_a_c___group1_gad06b4230d2b17d1d13f41dce4c782461}{D\-A\-C\-\_\-\-Set\-Channel1\-Data} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-Align, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\-\_\-t} \hyperlink{group___copter_control_b_l_ga6f3335509cc4943e20df66f72483910c}{Data})
\begin{DoxyCompactList}\small\item\em Sets the specified data holding register value for D\-A\-C channel1. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___d_a_c___group1_ga44e12006ec186791378d132da8541552}{D\-A\-C\-\_\-\-Set\-Channel2\-Data} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-Align, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\-\_\-t} \hyperlink{group___copter_control_b_l_ga6f3335509cc4943e20df66f72483910c}{Data})
\begin{DoxyCompactList}\small\item\em Sets the specified data holding register value for D\-A\-C channel2. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___d_a_c___group1_ga4ca2cfdf56ab35a23f2517f23d7fbb24}{D\-A\-C\-\_\-\-Set\-Dual\-Channel\-Data} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-Align, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\-\_\-t} \hyperlink{group___copter_control_b_l_gaf5f70ba2c733202d55d5ec7eda71995a}{Data2}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\-\_\-t} \hyperlink{group___copter_control_b_l_ga15766c5ec55ae360109b7d9bef6999b5}{Data1})
\begin{DoxyCompactList}\small\item\em Sets the specified data holding register value for dual channel D\-A\-C. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\-\_\-t} \hyperlink{group___d_a_c___group1_ga51274838de1e5dd012a82d7f44d7a50b}{D\-A\-C\-\_\-\-Get\-Data\-Output\-Value} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-Channel)
\begin{DoxyCompactList}\small\item\em Returns the last data output value of the selected D\-A\-C channel. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___d_a_c___group2_ga194cba38f60ace11658824f0250121f4}{D\-A\-C\-\_\-\-D\-M\-A\-Cmd} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-Channel, \hyperlink{group___exported__types_gac9a7e9a35d2513ec15c3b537aaa4fba1}{Functional\-State} New\-State)
\begin{DoxyCompactList}\small\item\em Enables or disables the specified D\-A\-C channel D\-M\-A request. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___d_a_c___group3_ga12d7495b30eae40c2570118cabbda1c3}{D\-A\-C\-\_\-\-I\-T\-Config} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-Channel, \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-I\-T, \hyperlink{group___exported__types_gac9a7e9a35d2513ec15c3b537aaa4fba1}{Functional\-State} New\-State)
\begin{DoxyCompactList}\small\item\em Enables or disables the specified D\-A\-C interrupts. \end{DoxyCompactList}\item 
\hyperlink{group___exported__types_ga89136caac2e14c55151f527ac02daaff}{Flag\-Status} \hyperlink{group___d_a_c___group3_ga9ee60b78f0ccd23bfbe54bce2a2f909b}{D\-A\-C\-\_\-\-Get\-Flag\-Status} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-Channel, \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-F\-L\-A\-G)
\begin{DoxyCompactList}\small\item\em Checks whether the specified D\-A\-C flag is set or not. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___d_a_c___group3_ga49543c52786d70d6b6311f3fee856d37}{D\-A\-C\-\_\-\-Clear\-Flag} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-Channel, \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-F\-L\-A\-G)
\begin{DoxyCompactList}\small\item\em Clears the D\-A\-C channel's pending flags. \end{DoxyCompactList}\item 
\hyperlink{group___exported__types_gaacbd7ed539db0aacd973a0f6eca34074}{I\-T\-Status} \hyperlink{group___d_a_c___group3_ga541aac3b50db3a8a806ec5ef30679aca}{D\-A\-C\-\_\-\-Get\-I\-T\-Status} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-Channel, \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-I\-T)
\begin{DoxyCompactList}\small\item\em Checks whether the specified D\-A\-C interrupt has occurred or not. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___d_a_c___group3_ga12d90e69a2642997136b23224d180641}{D\-A\-C\-\_\-\-Clear\-I\-T\-Pending\-Bit} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-Channel, \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} D\-A\-C\-\_\-\-I\-T)
\begin{DoxyCompactList}\small\item\em Clears the D\-A\-C channel's interrupt pending bits. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
This file provides firmware functions to manage the following functionalities of the Digital-\/to-\/\-Analog Converter (D\-A\-C) peripheral\-: \begin{DoxyAuthor}{Author}
M\-C\-D Application Team 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
V1.\-0.\-0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
04-\/\-September-\/2012
\begin{DoxyItemize}
\item D\-A\-C channels configuration\-: trigger, output buffer, data format
\item D\-M\-A management
\item Interrupts and flags management
\end{DoxyItemize}
\end{DoxyDate}
\begin{DoxyVerb}===============================================================================
                     ##### DAC Peripheral features #####
===============================================================================
   [..] The device integrates two 12-bit Digital Analog Converters that can 
        be used independently or simultaneously (dual mode):
        (#) DAC channel1 with DAC_OUT1 as output
        (#) DAC channel2 with DAC_OUT2 as output
   [..] Digital to Analog conversion can be non-triggered using DAC_Trigger_None
        and DAC_OUT1/DAC_OUT2 is available once writing to DHRx register using 
        DAC_SetChannel1Data()/DAC_SetChannel2Data.
   [..] Digital to Analog conversion can be triggered by:
        (#) External event: EXTI Line 9 (any GPIOx_Pin9) using DAC_Trigger_Ext_IT9.
            The used pin (GPIOx_Pin9) must be configured in input mode.
        (#) Timers TRGO: TIM2, TIM8/TIM3, TIM4, TIM6, TIM7, and TIM15 
            (DAC_Trigger_T2_TRGO, DAC_Trigger_T4_TRGO...)
            The timer TRGO event should be selected using TIM_SelectOutputTrigger()
            (++) To trigger DAC conversions by TIM3 instead of TIM8 follow
                this sequence:
                (+++) Enable SYSCFG APB clock by calling
                      RCC_APB2PeriphClockCmd(RCC_APB2Periph_SYSCFG, ENABLE);
                (+++) Select DAC_Trigger_T3_TRGO when calling DAC_Init()
                (+++) Remap the DAC trigger from TIM8 to TIM3 by calling
                      SYSCFG_TriggerRemapConfig(SYSCFG_TriggerRemap_DACTIM3, ENABLE)
        (#) Software using DAC_Trigger_Software
   [..] Each DAC channel integrates an output buffer that can be used to 
        reduce the output impedance, and to drive external loads directly
        without having to add an external operational amplifier.
        To enable, the output buffer use  
        DAC_InitStructure.DAC_OutputBuffer = DAC_OutputBuffer_Enable;
   [..] Refer to the device datasheet for more details about output impedance
        value with and without output buffer.
   [..] Both DAC channels can be used to generate:
        (+) Noise wave using DAC_WaveGeneration_Noise
        (+) Triangle wave using DAC_WaveGeneration_Triangle
   [..] Wave generation can be disabled using DAC_WaveGeneration_None
   [..] The DAC data format can be:
        (+) 8-bit right alignment using DAC_Align_8b_R
        (+) 12-bit left alignment using DAC_Align_12b_L
        (+) 12-bit right alignment using DAC_Align_12b_R
   [..] The analog output voltage on each DAC channel pin is determined
        by the following equation: 
        (+) DAC_OUTx = VREF+ * DOR / 4095 with DOR is the Data Output Register. 
        VREF+ is the input voltage reference (refer to the device datasheet)
        e.g. To set DAC_OUT1 to 0.7V, use DAC_SetChannel1Data(DAC_Align_12b_R, 868);
        Assuming that VREF+ = 3.3, DAC_OUT1 = (3.3 * 868) / 4095 = 0.7V
   [..] A DMA request can be generated when an external trigger (but not
        a software trigger) occurs if DMA2 requests are enabled using
        DAC_DMACmd();
        DMA requests are mapped as following:
        (+) DAC channel1 is mapped on DMA2 channel3 which must be already 
            configured.
        (+) DAC channel2 is mapped on DMA2 channel4 which must be already 
            configured.

                   ##### How to use this driver #####
===============================================================================          
   [..]
   (+) DAC APB clock must be enabled to get write access to DAC
       registers using RCC_APB1PeriphClockCmd(RCC_APB1Periph_DAC, ENABLE);
   (+) Configure DAC_OUTx (DAC_OUT1: PA4, DAC_OUT2: PA5) in analog mode.
   (+) Configure the DAC channel using DAC_Init();
   (+) Enable the DAC channel using DAC_Cmd();\end{DoxyVerb}


\begin{DoxyAttention}{Attention}

\end{DoxyAttention}
\subsubsection*{\begin{center}\copyright C\-O\-P\-Y\-R\-I\-G\-H\-T 2012 S\-T\-Microelectronics\end{center} }

Licensed under M\-C\-D-\/\-S\-T Liberty S\-W License Agreement V2, (the \char`\"{}\-License\char`\"{}); You may not use this file except in compliance with the License. You may obtain a copy of the License at\-: \begin{DoxyVerb}   http://www.st.com/software_license_agreement_liberty_v2
\end{DoxyVerb}


Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \char`\"{}\-A\-S I\-S\char`\"{} B\-A\-S\-I\-S, W\-I\-T\-H\-O\-U\-T W\-A\-R\-R\-A\-N\-T\-I\-E\-S O\-R C\-O\-N\-D\-I\-T\-I\-O\-N\-S O\-F A\-N\-Y K\-I\-N\-D, either express or implied. See the License for the specific language governing permissions and limitations under the License. 

Definition in file \hyperlink{stm32f30x__dac_8c_source}{stm32f30x\-\_\-dac.\-c}.

