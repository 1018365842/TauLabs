\hypertarget{namespacesys}{\section{sys Namespace Reference}
\label{namespacesys}\index{sys@{sys}}
}


Provides Py\-Mite's system module, sys.  


\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{namespacesys_abf45d6eb9e0803f71b96387da92c03e6}{exit}
\item 
def \hyperlink{namespacesys_a2f17e3134854ed811bba00fc14fb4d6b}{gc}
\item 
def \hyperlink{namespacesys_a4c3d074587bc5a80a866bf7faca1b529}{getb}
\item 
def \hyperlink{namespacesys_a31362b57e33b5453fcb29c95cff3393e}{heap}
\item 
def \hyperlink{namespacesys_a3204199ac550a6eda84b5670aeda17e1}{putb}
\item 
def \hyperlink{namespacesys_afd65df0396b14c40ef269eeea7705b38}{run\-In\-Thread}
\item 
def \hyperlink{namespacesys_a8c7f9b5c713403b888d8346afb011cdb}{time}
\item 
def \hyperlink{namespacesys_aa54a8ca456d4efe4ba5b4187241b007a}{wait}
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{namespacesys_a442ac47f6907b121091f68394fd016ba}{maxint} = 0x7\-F\-F\-F\-F\-F\-F\-F
\begin{DoxyCompactList}\small\item\em T\-O\-D\-O modules = None \#set ptr to dict w/native func platform string or device id, rand ver = \char`\"{}0.\-1\char`\"{} \# X\-X\-X compile date \& platform? Example\-: sys.\-version = '2.\-4.\-1 (\#1, Feb 26 2006, 16\-:26\-:36) \par
\mbox{[}G\-C\-C 4.\-0.\-0 20041026 (Apple Computer, Inc. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Provides Py\-Mite's system module, sys. \subsubsection*{U\-S\-A\-G\-E}

import sys 

\subsection{Function Documentation}
\hypertarget{namespacesys_abf45d6eb9e0803f71b96387da92c03e6}{\index{sys@{sys}!exit@{exit}}
\index{exit@{exit}!sys@{sys}}
\subsubsection[{exit}]{\setlength{\rightskip}{0pt plus 5cm}def sys.\-exit (
\begin{DoxyParamCaption}
\item[{}]{val}
\end{DoxyParamCaption}
)}}\label{namespacesys_abf45d6eb9e0803f71b96387da92c03e6}
\begin{DoxyVerb}__NATIVE__
pPmObj_t pval = C_NULL;
PmReturn_t retval;

/* If no arg given, assume return 0 */
if (NATIVE_GET_NUM_ARGS() == 0)
{
    NATIVE_SET_TOS(PM_ZERO);
}

/* If 1 arg given, put it on stack */
else if (NATIVE_GET_NUM_ARGS() == 1)
{
    pval = NATIVE_GET_LOCAL(0);
    NATIVE_SET_TOS(pval);
}

/* If wrong number of args, raise TypeError */
else
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

/* Raise the SystemExit exception */
PM_RAISE(retval, PM_RET_EX_EXIT);
return retval;
\end{DoxyVerb}
 

Definition at line 32 of file sys.\-py.

\hypertarget{namespacesys_a2f17e3134854ed811bba00fc14fb4d6b}{\index{sys@{sys}!gc@{gc}}
\index{gc@{gc}!sys@{sys}}
\subsubsection[{gc}]{\setlength{\rightskip}{0pt plus 5cm}def sys.\-gc (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{namespacesys_a2f17e3134854ed811bba00fc14fb4d6b}
\begin{DoxyVerb}__NATIVE__
PmReturn_t retval = PM_RET_OK;
#ifdef HAVE_GC
/* If wrong number of args, raise TypeError */
if (NATIVE_GET_NUM_ARGS() != 0)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

retval = heap_gcRun();
#endif
NATIVE_SET_TOS(PM_NONE);

return retval;
\end{DoxyVerb}
 

Definition at line 67 of file sys.\-py.

\hypertarget{namespacesys_a4c3d074587bc5a80a866bf7faca1b529}{\index{sys@{sys}!getb@{getb}}
\index{getb@{getb}!sys@{sys}}
\subsubsection[{getb}]{\setlength{\rightskip}{0pt plus 5cm}def sys.\-getb (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{namespacesys_a4c3d074587bc5a80a866bf7faca1b529}
\begin{DoxyVerb}__NATIVE__
uint8_t b;
pPmObj_t pb;
PmReturn_t retval;

/* If wrong number of args, raise TypeError */
if (NATIVE_GET_NUM_ARGS() != 0)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

retval = plat_getByte(&b);
PM_RETURN_IF_ERROR(retval);

retval = int_new((int32_t)b, &pb);
NATIVE_SET_TOS(pb);
return retval;
\end{DoxyVerb}
 

Definition at line 91 of file sys.\-py.

\hypertarget{namespacesys_a31362b57e33b5453fcb29c95cff3393e}{\index{sys@{sys}!heap@{heap}}
\index{heap@{heap}!sys@{sys}}
\subsubsection[{heap}]{\setlength{\rightskip}{0pt plus 5cm}def sys.\-heap (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{namespacesys_a31362b57e33b5453fcb29c95cff3393e}
\begin{DoxyVerb}__NATIVE__
PmReturn_t retval;
pPmObj_t pavail;
pPmObj_t pmax;
pPmObj_t ptup;
uint8_t objid;

/* If wrong number of args, raise TypeError */
if (NATIVE_GET_NUM_ARGS() != 0)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

/* Allocate a tuple to store the return values */
retval = tuple_new(2, &ptup);
PM_RETURN_IF_ERROR(retval);

/* Get the maximum heap size */
heap_gcPushTempRoot(ptup, &objid);
retval = int_new(PM_HEAP_SIZE, &pmax);
if (retval != PM_RET_OK)
{
    heap_gcPopTempRoot(objid);
    return retval;
}

/* Allocate an int to hold the amount of heap available */
retval = int_new(heap_getAvail() - sizeof(PmInt_t), &pavail);
heap_gcPopTempRoot(objid);
PM_RETURN_IF_ERROR(retval);

/* Put the two heap values in the tuple */
((pPmTuple_t)ptup)->val[0] = pavail;
((pPmTuple_t)ptup)->val[1] = pmax;

/* Return the tuple on the stack */
NATIVE_SET_TOS(ptup);

return retval;
\end{DoxyVerb}
 

Definition at line 117 of file sys.\-py.

\hypertarget{namespacesys_a3204199ac550a6eda84b5670aeda17e1}{\index{sys@{sys}!putb@{putb}}
\index{putb@{putb}!sys@{sys}}
\subsubsection[{putb}]{\setlength{\rightskip}{0pt plus 5cm}def sys.\-putb (
\begin{DoxyParamCaption}
\item[{}]{b}
\end{DoxyParamCaption}
)}}\label{namespacesys_a3204199ac550a6eda84b5670aeda17e1}
\begin{DoxyVerb}__NATIVE__
uint8_t b;
pPmObj_t pb;
PmReturn_t retval;

pb = NATIVE_GET_LOCAL(0);

/* If wrong number of args, raise TypeError */
if (NATIVE_GET_NUM_ARGS() != 1)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

/* If arg is not an int, raise TypeError */
if (OBJ_GET_TYPE(pb) != OBJ_TYPE_INT)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

b = ((pPmInt_t)pb)->val & 0xFF;
retval = plat_putByte(b);
NATIVE_SET_TOS(PM_NONE);
return retval;
\end{DoxyVerb}
 

Definition at line 165 of file sys.\-py.

\hypertarget{namespacesys_afd65df0396b14c40ef269eeea7705b38}{\index{sys@{sys}!run\-In\-Thread@{run\-In\-Thread}}
\index{run\-In\-Thread@{run\-In\-Thread}!sys@{sys}}
\subsubsection[{run\-In\-Thread}]{\setlength{\rightskip}{0pt plus 5cm}def sys.\-run\-In\-Thread (
\begin{DoxyParamCaption}
\item[{}]{f}
\end{DoxyParamCaption}
)}}\label{namespacesys_afd65df0396b14c40ef269eeea7705b38}
\begin{DoxyVerb}__NATIVE__
PmReturn_t retval;
pPmObj_t pf;

/* If wrong number of args, raise TypeError */
if (NATIVE_GET_NUM_ARGS() != 1)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

/* If arg is not a function, raise TypeError */
pf = NATIVE_GET_LOCAL(0);
if (OBJ_GET_TYPE(pf) != OBJ_TYPE_FXN)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

retval = interp_addThread((pPmFunc_t)pf);
NATIVE_SET_TOS(PM_NONE);
return retval;
\end{DoxyVerb}
 

Definition at line 198 of file sys.\-py.

\hypertarget{namespacesys_a8c7f9b5c713403b888d8346afb011cdb}{\index{sys@{sys}!time@{time}}
\index{time@{time}!sys@{sys}}
\subsubsection[{time}]{\setlength{\rightskip}{0pt plus 5cm}def sys.\-time (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{namespacesys_a8c7f9b5c713403b888d8346afb011cdb}
\begin{DoxyVerb}__NATIVE__
uint32_t t;
pPmObj_t pt;
PmReturn_t retval;

/* If wrong number of args, raise TypeError */
if (NATIVE_GET_NUM_ARGS() != 0)
{
    PM_RAISE(retval, PM_RET_EX_TYPE);
    return retval;
}

/* Get the system time (milliseconds since init) */
retval = plat_getMsTicks(&t);
PM_RETURN_IF_ERROR(retval);

/*
 * Raise ValueError if there is an overflow
 * (plat_getMsTicks is unsigned; int is signed)
 */
if ((int32_t)t < 0)
{
    PM_RAISE(retval, PM_RET_EX_VAL);
    return retval;
}

/* Return an int object with the time value */
retval = int_new((int32_t)t, &pt);
NATIVE_SET_TOS(pt);
return retval;
\end{DoxyVerb}
 

Definition at line 228 of file sys.\-py.

\hypertarget{namespacesys_aa54a8ca456d4efe4ba5b4187241b007a}{\index{sys@{sys}!wait@{wait}}
\index{wait@{wait}!sys@{sys}}
\subsubsection[{wait}]{\setlength{\rightskip}{0pt plus 5cm}def sys.\-wait (
\begin{DoxyParamCaption}
\item[{}]{ms}
\end{DoxyParamCaption}
)}}\label{namespacesys_aa54a8ca456d4efe4ba5b4187241b007a}


Definition at line 266 of file sys.\-py.



\subsection{Variable Documentation}
\hypertarget{namespacesys_a442ac47f6907b121091f68394fd016ba}{\index{sys@{sys}!maxint@{maxint}}
\index{maxint@{maxint}!sys@{sys}}
\subsubsection[{maxint}]{\setlength{\rightskip}{0pt plus 5cm}int sys.\-maxint = 0x7\-F\-F\-F\-F\-F\-F\-F}}\label{namespacesys_a442ac47f6907b121091f68394fd016ba}


T\-O\-D\-O modules = None \#set ptr to dict w/native func platform string or device id, rand ver = \char`\"{}0.\-1\char`\"{} \# X\-X\-X compile date \& platform? Example\-: sys.\-version = '2.\-4.\-1 (\#1, Feb 26 2006, 16\-:26\-:36) \par
\mbox{[}G\-C\-C 4.\-0.\-0 20041026 (Apple Computer, Inc. 

build 4061)\mbox{]}' 

Definition at line 29 of file sys.\-py.

