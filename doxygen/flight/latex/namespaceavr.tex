\hypertarget{namespaceavr}{\section{avr Namespace Reference}
\label{namespaceavr}\index{avr@{avr}}
}


A\-V\-R Access Module.  


\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{namespaceavr_ae5e4d944d11af88503bca4bc38c8ad24}{port\-A}
\item 
def \hyperlink{namespaceavr_acd36edac7e5acb37cf8e0875251a71a6}{ddr\-A}
\item 
def \hyperlink{namespaceavr_aab653e9f85add17b0055f36dcba2a24d}{digital\-Read}
\item 
def \hyperlink{namespaceavr_a222fdb00cfa9f89c1c3771fbae3a86bc}{digital\-Write}
\item 
def \hyperlink{namespaceavr_aacfd02ad9a2c5f7b4ad3e3a76b5c85de}{delay}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
A\-V\-R Access Module. Provides generic access to the A\-V\-R microcontroller

Note that to save R\-A\-M when the module is imported, many of the port \& ddr methods below are commented out. Uncomment and recompile in order to use!

{\bfseries U\-S\-A\-G\-E}


\begin{DoxyCode}
1 \textcolor{keyword}{import} avr
2 \hyperlink{namespaceavr_acd36edac7e5acb37cf8e0875251a71a6}{avr.ddrA}(0) \textcolor{comment}{# Set all pins as input}
3 a = \hyperlink{namespaceavr_ae5e4d944d11af88503bca4bc38c8ad24}{avr.portA}()
4 \hyperlink{namespaceavr_acd36edac7e5acb37cf8e0875251a71a6}{avr.ddrA}(0xFF) \textcolor{comment}{# Set all pins as output}
5 \hyperlink{namespaceavr_ae5e4d944d11af88503bca4bc38c8ad24}{avr.portA}(42)
6 
7 \hyperlink{namespaceavr_aacfd02ad9a2c5f7b4ad3e3a76b5c85de}{avr.delay}(500) \textcolor{comment}{# Half second pause}
8 
9 \textcolor{keywordflow}{if} \hyperlink{namespaceavr_aab653e9f85add17b0055f36dcba2a24d}{avr.digitalRead}(\textcolor{stringliteral}{'A'}, 3):
10   \hyperlink{namespaceavr_a222fdb00cfa9f89c1c3771fbae3a86bc}{avr.digitalWrite}(\textcolor{stringliteral}{'D'}, 0, \textcolor{keyword}{True})
\end{DoxyCode}
 

\subsection{Function Documentation}
\hypertarget{namespaceavr_acd36edac7e5acb37cf8e0875251a71a6}{\index{avr@{avr}!ddr\-A@{ddr\-A}}
\index{ddr\-A@{ddr\-A}!avr@{avr}}
\subsubsection[{ddr\-A}]{\setlength{\rightskip}{0pt plus 5cm}def avr.\-ddr\-A (
\begin{DoxyParamCaption}
\item[{}]{a}
\end{DoxyParamCaption}
)}}\label{namespaceavr_acd36edac7e5acb37cf8e0875251a71a6}
\begin{DoxyVerb}__NATIVE__
return _ddrX(&DDRA);
\end{DoxyVerb}
 

Definition at line 267 of file avr.\-py.

\hypertarget{namespaceavr_aacfd02ad9a2c5f7b4ad3e3a76b5c85de}{\index{avr@{avr}!delay@{delay}}
\index{delay@{delay}!avr@{avr}}
\subsubsection[{delay}]{\setlength{\rightskip}{0pt plus 5cm}def avr.\-delay (
\begin{DoxyParamCaption}
\item[{}]{ms}
\end{DoxyParamCaption}
)}}\label{namespaceavr_aacfd02ad9a2c5f7b4ad3e3a76b5c85de}
\begin{DoxyVerb}__NATIVE__
PmReturn_t retval = PM_RET_OK;

if(NATIVE_GET_NUM_ARGS() != 1)
{
  PM_RAISE(retval, PM_RET_EX_TYPE);
  return retval;
}

pPmObj_t pa = NATIVE_GET_LOCAL(0);
if (OBJ_GET_TYPE(pa) == OBJ_TYPE_INT)
{
  _delay_ms((double) ((pPmInt_t)pa)->val);
}
else if (OBJ_GET_TYPE(pa) == OBJ_TYPE_FLT)
{
  _delay_ms((double) ((pPmFloat_t)pa)->val);
}
else
{
  PM_RAISE(retval, PM_RET_EX_TYPE);
}

NATIVE_SET_TOS(PM_NONE);
return retval;
\end{DoxyVerb}
 

Definition at line 382 of file avr.\-py.

\hypertarget{namespaceavr_aab653e9f85add17b0055f36dcba2a24d}{\index{avr@{avr}!digital\-Read@{digital\-Read}}
\index{digital\-Read@{digital\-Read}!avr@{avr}}
\subsubsection[{digital\-Read}]{\setlength{\rightskip}{0pt plus 5cm}def avr.\-digital\-Read (
\begin{DoxyParamCaption}
\item[{}]{port, }
\item[{}]{pin}
\end{DoxyParamCaption}
)}}\label{namespaceavr_aab653e9f85add17b0055f36dcba2a24d}
\begin{DoxyVerb}__NATIVE__
volatile uint8_t *port;
volatile uint8_t *direction;
uint8_t pin;
PmReturn_t retval = PM_RET_OK;

if(NATIVE_GET_NUM_ARGS() != 2)
{
  PM_RAISE(retval, PM_RET_EX_TYPE);
  return retval;
}

retval = _get_port_register(&port, NULL, &direction, &pin);
if(retval != PM_RET_OK)
  return retval;

*direction &= ~(1<<pin); // Set pin to input
pPmObj_t pa = (*port & (1<<pin)) ? PM_TRUE : PM_FALSE;
NATIVE_SET_TOS(pa); // Push our result object onto the stack
return retval;
\end{DoxyVerb}
 

Definition at line 311 of file avr.\-py.

\hypertarget{namespaceavr_a222fdb00cfa9f89c1c3771fbae3a86bc}{\index{avr@{avr}!digital\-Write@{digital\-Write}}
\index{digital\-Write@{digital\-Write}!avr@{avr}}
\subsubsection[{digital\-Write}]{\setlength{\rightskip}{0pt plus 5cm}def avr.\-digital\-Write (
\begin{DoxyParamCaption}
\item[{}]{port, }
\item[{}]{pin, }
\item[{}]{value}
\end{DoxyParamCaption}
)}}\label{namespaceavr_a222fdb00cfa9f89c1c3771fbae3a86bc}
\begin{DoxyVerb}__NATIVE__
volatile uint8_t *port;
volatile uint8_t *direction;
uint8_t pin;
pPmObj_t pc;
PmReturn_t retval = PM_RET_OK;

NATIVE_SET_TOS(PM_NONE);

if(NATIVE_GET_NUM_ARGS() != 3)
{
  PM_RAISE(retval, PM_RET_EX_TYPE);
  return retval;
}

retval = _get_port_register(NULL, &port, &direction, &pin);
if(retval != PM_RET_OK)
  return retval;

pc = NATIVE_GET_LOCAL(2);

/* If the arg is not an integer, raise TypeError */
if (OBJ_GET_TYPE(pc) != OBJ_TYPE_INT && OBJ_GET_TYPE(pc) != OBJ_TYPE_BOOL)
{
  PM_RAISE(retval, PM_RET_EX_TYPE);
  return retval;
}

*direction |= (1<<pin); // Set pin to output

if(((pPmInt_t)pc)->val)
  *port |= 1<<pin;
else
  *port &= ~(1<<pin);
return retval;
\end{DoxyVerb}
 

Definition at line 342 of file avr.\-py.

\hypertarget{namespaceavr_ae5e4d944d11af88503bca4bc38c8ad24}{\index{avr@{avr}!port\-A@{port\-A}}
\index{port\-A@{port\-A}!avr@{avr}}
\subsubsection[{port\-A}]{\setlength{\rightskip}{0pt plus 5cm}def avr.\-port\-A (
\begin{DoxyParamCaption}
\item[{}]{a}
\end{DoxyParamCaption}
)}}\label{namespaceavr_ae5e4d944d11af88503bca4bc38c8ad24}
\begin{DoxyVerb}__NATIVE__
return _portX(&PORTA, &DDRA, &PINA);
\end{DoxyVerb}
 

Definition at line 231 of file avr.\-py.

