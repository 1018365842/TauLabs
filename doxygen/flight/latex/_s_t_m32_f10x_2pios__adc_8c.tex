\hypertarget{_s_t_m32_f10x_2pios__adc_8c}{\section{/home/jose/\-Code/gui\-Tau/flight/\-Pi\-O\-S/\-S\-T\-M32\-F10x/pios\-\_\-adc.c File Reference}
\label{_s_t_m32_f10x_2pios__adc_8c}\index{/home/jose/\-Code/gui\-Tau/flight/\-Pi\-O\-S/\-S\-T\-M32\-F10x/pios\-\_\-adc.\-c@{/home/jose/\-Code/gui\-Tau/flight/\-Pi\-O\-S/\-S\-T\-M32\-F10x/pios\-\_\-adc.\-c}}
}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structpios__adc__dev}{pios\-\_\-adc\-\_\-dev}
\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{group___p_i_o_s___a_d_c_gad4639b786d45b213ac842a0c4cf3e78d}{pios\-\_\-adc\-\_\-dev\-\_\-magic} \{ \hyperlink{group___p_i_o_s___a_d_c_ggad4639b786d45b213ac842a0c4cf3e78dab432edba8e4a3348b2f28cf7edf94f79}{P\-I\-O\-S\-\_\-\-A\-D\-C\-\_\-\-D\-E\-V\-\_\-\-M\-A\-G\-I\-C} = 0x58375124, 
\hyperlink{group___p_i_o_s___a_d_c_ggad4639b786d45b213ac842a0c4cf3e78dab432edba8e4a3348b2f28cf7edf94f79}{P\-I\-O\-S\-\_\-\-A\-D\-C\-\_\-\-D\-E\-V\-\_\-\-M\-A\-G\-I\-C} = 0x58375124
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___p_i_o_s___a_d_c_ga1a45c599137a6722f7a8d30470e21bb2}{P\-I\-O\-S\-\_\-\-A\-D\-C\-\_\-downsample\-\_\-data} ()
\begin{DoxyCompactList}\small\item\em Downsample the data for each of the channels then call callback function if installed. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_gafd12020da5a235dfcf0c3c748fb5baed}{int32\-\_\-t} \hyperlink{group___p_i_o_s___a_d_c_ga7182b35f2962ad07826b045eb987a33a}{P\-I\-O\-S\-\_\-\-A\-D\-C\-\_\-\-Init} (\hyperlink{group___n_a_m_e_ga7ae6d0e43244213b34de2c2b9aa30da6}{const} struct \hyperlink{structpios__adc__cfg}{pios\-\_\-adc\-\_\-cfg} $\ast$cfg)
\begin{DoxyCompactList}\small\item\em Initialise the A\-D\-C Peripheral, configure to run at the max oversampling. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___p_i_o_s___a_d_c_ga0edf09afa78da740bb49069ee8221b5c}{P\-I\-O\-S\-\_\-\-A\-D\-C\-\_\-\-Config} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} oversampling)
\begin{DoxyCompactList}\small\item\em Configure the A\-D\-C to run at a fixed oversampling. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_gafd12020da5a235dfcf0c3c748fb5baed}{int32\-\_\-t} \hyperlink{group___p_i_o_s___a_d_c_ga014bdd5e97b33f0e3eb9b8b4318a8586}{P\-I\-O\-S\-\_\-\-A\-D\-C\-\_\-\-Pin\-Get} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} pin)
\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___p_i_o_s___a_d_c_gaba0959952db7ff67364a28ea801c41ec}{P\-I\-O\-S\-\_\-\-A\-D\-C\-\_\-\-Set\-Callback} (\hyperlink{group___p_i_o_s___a_d_c_ga20bf90833813c2c4945fab90c8e4f386}{A\-D\-C\-Callback} new\-\_\-function)
\begin{DoxyCompactList}\small\item\em Set a callback function that is executed whenever the A\-D\-C double buffer swaps. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___p_i_o_s___a_d_c_ga27cf963b58fa9ab8f73ea6aedec43f74}{P\-I\-O\-S\-\_\-\-A\-D\-C\-\_\-\-Set\-Queue} (\hyperlink{_common_2_libraries_2_free_r_t_o_s_2_source_2include_2queue_8h_a229037f755b756156e34a440ce134b8b}{x\-Queue\-Handle} data\-\_\-queue)
\begin{DoxyCompactList}\small\item\em Register a queue to add data to when downsampled. \end{DoxyCompactList}\item 
float $\ast$ \hyperlink{group___p_i_o_s___a_d_c_ga0d2a803571d249493aa10774c9358f0f}{P\-I\-O\-S\-\_\-\-A\-D\-C\-\_\-\-Get\-Buffer} (\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void})
\begin{DoxyCompactList}\small\item\em Return the address of the downsampled data buffer. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_aa343fa3b3d06292b959ffdd4c4703b06}{int16\-\_\-t} $\ast$ \hyperlink{group___p_i_o_s___a_d_c_ga8f65053761f8ff493734b8105528a3ab}{P\-I\-O\-S\-\_\-\-A\-D\-C\-\_\-\-Get\-Raw\-Buffer} (\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void})
\begin{DoxyCompactList}\small\item\em Return the address of the raw data data buffer. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} \hyperlink{group___p_i_o_s___a_d_c_gaa343a6f620ddd80259e92ff0595cf977}{P\-I\-O\-S\-\_\-\-A\-D\-C\-\_\-\-Get\-Over\-Sampling} (\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void})
\begin{DoxyCompactList}\small\item\em Return the amount of over sampling. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___p_i_o_s___a_d_c_gab2bb95efd8a061a377ae0d8cd60ca1ed}{P\-I\-O\-S\-\_\-\-A\-D\-C\-\_\-\-Set\-F\-I\-R\-Coefficients} (float $\ast$new\-\_\-filter)
\begin{DoxyCompactList}\small\item\em Set the fir coefficients. Takes as many samples as the current filter order plus one (normalization) \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___p_i_o_s___a_d_c_gad37f0d162db269d768666bd699df5ee8}{P\-I\-O\-S\-\_\-\-A\-D\-C\-\_\-\-D\-M\-A\-\_\-\-Handler} (\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void})
\begin{DoxyCompactList}\small\item\em Interrupt for half and full buffer transfer. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structpios__adc__dev}{pios\-\_\-adc\-\_\-dev} $\ast$ \hyperlink{group___p_i_o_s___a_d_c_gab32db3584e1b8779726fcabc7aa2dc9a}{pios\-\_\-adc\-\_\-dev}
\end{DoxyCompactItemize}
