\hypertarget{stm32f4xx__can_8c}{\section{/home/jose/\-Code/gui\-Tau/flight/\-Pi\-O\-S/\-S\-T\-M32\-F4xx/\-Libraries/\-S\-T\-M32\-F4xx\-\_\-\-Std\-Periph\-\_\-\-Driver/src/stm32f4xx\-\_\-can.c File Reference}
\label{stm32f4xx__can_8c}\index{/home/jose/\-Code/gui\-Tau/flight/\-Pi\-O\-S/\-S\-T\-M32\-F4xx/\-Libraries/\-S\-T\-M32\-F4xx\-\_\-\-Std\-Periph\-\_\-\-Driver/src/stm32f4xx\-\_\-can.\-c@{/home/jose/\-Code/gui\-Tau/flight/\-Pi\-O\-S/\-S\-T\-M32\-F4xx/\-Libraries/\-S\-T\-M32\-F4xx\-\_\-\-Std\-Periph\-\_\-\-Driver/src/stm32f4xx\-\_\-can.\-c}}
}


This file provides firmware functions to manage the following functionalities of the Controller area network (C\-A\-N) peripheral\-:  


\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___c_a_n___group1_ga002b74cd69574a14b17ad445090245cd}{C\-A\-N\-\_\-\-De\-Init} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx)
\begin{DoxyCompactList}\small\item\em Deinitializes the C\-A\-N peripheral registers to their default reset values. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} \hyperlink{group___c_a_n___group1_ga9023c35a9ab931ad4513fc5d19b4bd6c}{C\-A\-N\-\_\-\-Init} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx, C\-A\-N\-\_\-\-Init\-Type\-Def $\ast$C\-A\-N\-\_\-\-Init\-Struct)
\begin{DoxyCompactList}\small\item\em Initializes the C\-A\-N peripheral according to the specified parameters in the C\-A\-N\-\_\-\-Init\-Struct. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___c_a_n___group1_ga39476830280340363c51041be6b12647}{C\-A\-N\-\_\-\-Filter\-Init} (\hyperlink{struct_c_a_n___filter_init_type_def}{C\-A\-N\-\_\-\-Filter\-Init\-Type\-Def} $\ast$C\-A\-N\-\_\-\-Filter\-Init\-Struct)
\begin{DoxyCompactList}\small\item\em Configures the C\-A\-N reception filter according to the specified parameters in the C\-A\-N\-\_\-\-Filter\-Init\-Struct. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___c_a_n___group1_gad77ad810868ed111755fc9e8ae0c7646}{C\-A\-N\-\_\-\-Struct\-Init} (C\-A\-N\-\_\-\-Init\-Type\-Def $\ast$C\-A\-N\-\_\-\-Init\-Struct)
\begin{DoxyCompactList}\small\item\em Fills each C\-A\-N\-\_\-\-Init\-Struct member with its default value. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___c_a_n___group1_ga109ff8960bc59f44b984c9646f17b3c0}{C\-A\-N\-\_\-\-Slave\-Start\-Bank} (\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} C\-A\-N\-\_\-\-Bank\-Number)
\begin{DoxyCompactList}\small\item\em Select the start bank filter for slave C\-A\-N. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___c_a_n___group1_gac0e2d33e08caf49d1f1251f0dcc20213}{C\-A\-N\-\_\-\-D\-B\-G\-Freeze} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx, \hyperlink{group___exported__types_gac9a7e9a35d2513ec15c3b537aaa4fba1}{Functional\-State} New\-State)
\begin{DoxyCompactList}\small\item\em Enables or disables the D\-B\-G Freeze for C\-A\-N. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___c_a_n___group1_ga94740177bab153ca5b102d122f9a8cca}{C\-A\-N\-\_\-\-T\-T\-Com\-Mode\-Cmd} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx, \hyperlink{group___exported__types_gac9a7e9a35d2513ec15c3b537aaa4fba1}{Functional\-State} New\-State)
\begin{DoxyCompactList}\small\item\em Enables or disables the C\-A\-N Time Trigger\-Operation communication mode. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} \hyperlink{group___c_a_n___group2_gaccfcb81f76f58400077c7b2d8641dd83}{C\-A\-N\-\_\-\-Transmit} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx, \hyperlink{struct_can_tx_msg}{Can\-Tx\-Msg} $\ast$Tx\-Message)
\begin{DoxyCompactList}\small\item\em Initiates and transmits a C\-A\-N frame message. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} \hyperlink{group___c_a_n___group2_ga68ab05a0a6cdfcc2b6f6b6b2c10848e2}{C\-A\-N\-\_\-\-Transmit\-Status} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} Transmit\-Mailbox)
\begin{DoxyCompactList}\small\item\em Checks the transmission status of a C\-A\-N Frame. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___c_a_n___group2_ga81106cdf5395a1947bfc87ec1685829e}{C\-A\-N\-\_\-\-Cancel\-Transmit} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} Mailbox)
\begin{DoxyCompactList}\small\item\em Cancels a transmit request. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___c_a_n___group3_ga351b90bb8a3bb0c846f85bbd56ef4dc8}{C\-A\-N\-\_\-\-Receive} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} F\-I\-F\-O\-Number, \hyperlink{struct_can_rx_msg}{Can\-Rx\-Msg} $\ast$Rx\-Message)
\begin{DoxyCompactList}\small\item\em Receives a correct C\-A\-N frame. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___c_a_n___group3_ga1bc3b39471e579b4101624c33d27918b}{C\-A\-N\-\_\-\-F\-I\-F\-O\-Release} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} F\-I\-F\-O\-Number)
\begin{DoxyCompactList}\small\item\em Releases the specified receive F\-I\-F\-O. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} \hyperlink{group___c_a_n___group3_ga7100459a95ce1b3cfe8ab15e112029fe}{C\-A\-N\-\_\-\-Message\-Pending} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} F\-I\-F\-O\-Number)
\begin{DoxyCompactList}\small\item\em Returns the number of pending received messages. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} \hyperlink{group___c_a_n___group4_gab2a3630e9e3024114eb117d14e514208}{C\-A\-N\-\_\-\-Operating\-Mode\-Request} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} C\-A\-N\-\_\-\-Operating\-Mode)
\begin{DoxyCompactList}\small\item\em Selects the C\-A\-N Operation mode. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} \hyperlink{group___c_a_n___group4_ga640215e38765759d7eceb8a039046667}{C\-A\-N\-\_\-\-Sleep} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx)
\begin{DoxyCompactList}\small\item\em Enters the Sleep (low power) mode. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} \hyperlink{group___c_a_n___group4_ga78cdfbf1884b9e33c552bcbca15bed10}{C\-A\-N\-\_\-\-Wake\-Up} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx)
\begin{DoxyCompactList}\small\item\em Wakes up the C\-A\-N peripheral from sleep mode . \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} \hyperlink{group___c_a_n___group5_gaaee721a392b6b21bfd15dc160aeb6924}{C\-A\-N\-\_\-\-Get\-Last\-Error\-Code} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx)
\begin{DoxyCompactList}\small\item\em Returns the C\-A\-Nx's last error code (L\-E\-C). \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} \hyperlink{group___c_a_n___group5_ga6903eecbec40eb1361d915ddde9a3274}{C\-A\-N\-\_\-\-Get\-Receive\-Error\-Counter} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx)
\begin{DoxyCompactList}\small\item\em Returns the C\-A\-Nx Receive Error Counter (R\-E\-C). \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\-\_\-t} \hyperlink{group___c_a_n___group5_ga85ee0c35bf7ca15d4e4c862eef534843}{C\-A\-N\-\_\-\-Get\-L\-S\-B\-Transmit\-Error\-Counter} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx)
\begin{DoxyCompactList}\small\item\em Returns the L\-S\-B of the 9-\/bit C\-A\-Nx Transmit Error Counter(\-T\-E\-C). \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___c_a_n___group6_gad1a8b2499a780b5bfa4accb3597b02f4}{C\-A\-N\-\_\-\-I\-T\-Config} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx, \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} C\-A\-N\-\_\-\-I\-T, \hyperlink{group___exported__types_gac9a7e9a35d2513ec15c3b537aaa4fba1}{Functional\-State} New\-State)
\begin{DoxyCompactList}\small\item\em Enables or disables the specified C\-A\-Nx interrupts. \end{DoxyCompactList}\item 
\hyperlink{group___exported__types_ga89136caac2e14c55151f527ac02daaff}{Flag\-Status} \hyperlink{group___c_a_n___group6_ga2faad96caf823ef463cc5b5b25c480bb}{C\-A\-N\-\_\-\-Get\-Flag\-Status} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx, \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} C\-A\-N\-\_\-\-F\-L\-A\-G)
\begin{DoxyCompactList}\small\item\em Checks whether the specified C\-A\-N flag is set or not. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___c_a_n___group6_ga2c01646d5d3a2d7045e8dd71f58f8742}{C\-A\-N\-\_\-\-Clear\-Flag} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx, \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} C\-A\-N\-\_\-\-F\-L\-A\-G)
\begin{DoxyCompactList}\small\item\em Clears the C\-A\-N's pending flags. \end{DoxyCompactList}\item 
\hyperlink{group___exported__types_gaacbd7ed539db0aacd973a0f6eca34074}{I\-T\-Status} \hyperlink{group___c_a_n___group6_ga9aca05b3013e1b3438f3559f80b33c82}{C\-A\-N\-\_\-\-Get\-I\-T\-Status} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx, \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} C\-A\-N\-\_\-\-I\-T)
\begin{DoxyCompactList}\small\item\em Checks whether the specified C\-A\-Nx interrupt has occurred or not. \end{DoxyCompactList}\item 
\hyperlink{group___n_a_m_e_ga18028b8badbf1ea7e704ccac3c488e82}{void} \hyperlink{group___c_a_n___group6_ga30bf7ac0c1793f6622a4a1adbb7dbc8a}{C\-A\-N\-\_\-\-Clear\-I\-T\-Pending\-Bit} (\hyperlink{struct_c_a_n___type_def}{C\-A\-N\-\_\-\-Type\-Def} $\ast$C\-A\-Nx, \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\-\_\-t} C\-A\-N\-\_\-\-I\-T)
\begin{DoxyCompactList}\small\item\em Clears the C\-A\-Nx's interrupt pending bits. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
This file provides firmware functions to manage the following functionalities of the Controller area network (C\-A\-N) peripheral\-: \begin{DoxyAuthor}{Author}
M\-C\-D Application Team 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
V1.\-0.\-2 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
05-\/\-March-\/2012
\begin{DoxyItemize}
\item Initialization and Configuration
\item C\-A\-N Frames Transmission
\item C\-A\-N Frames Reception
\item Operation modes switch
\item Error management
\item Interrupts and flags
\end{DoxyItemize}
\end{DoxyDate}
\begin{DoxyVerb}*                               
*          ===================================================================      
*                                   How to use this driver
*          ===================================================================
              
*          1.  Enable the CAN controller interface clock using 
*                  RCC_APB1PeriphClockCmd(RCC_APB1Periph_CAN1, ENABLE); for CAN1 
*              and RCC_APB1PeriphClockCmd(RCC_APB1Periph_CAN2, ENABLE); for CAN2
*  @note   In case you are using CAN2 only, you have to enable the CAN1 clock.
*     
*          2. CAN pins configuration
*               - Enable the clock for the CAN GPIOs using the following function:
*                   RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOx, ENABLE);   
*               - Connect the involved CAN pins to AF9 using the following function 
*                   GPIO_PinAFConfig(GPIOx, GPIO_PinSourcex, GPIO_AF_CANx); 
*                - Configure these CAN pins in alternate function mode by calling
*                  the function  GPIO_Init();
*    
*          3.  Initialise and configure the CAN using CAN_Init() and 
*               CAN_FilterInit() functions.   
*               
*          4.  Transmit the desired CAN frame using CAN_Transmit() function.
*         
*          5.  Check the transmission of a CAN frame using CAN_TransmitStatus()
*              function.
*               
*          6.  Cancel the transmission of a CAN frame using CAN_CancelTransmit()
*              function.  
*            
*          7.  Receive a CAN frame using CAN_Recieve() function.
*         
*          8.  Release the receive FIFOs using CAN_FIFORelease() function.
*               
*          9. Return the number of pending received frames using 
*              CAN_MessagePending() function.            
*                   
*          10. To control CAN events you can use one of the following two methods:
*               - Check on CAN flags using the CAN_GetFlagStatus() function.  
*               - Use CAN interrupts through the function CAN_ITConfig() at 
*                 initialization phase and CAN_GetITStatus() function into 
*                 interrupt routines to check if the event has occurred or not.
*             After checking on a flag you should clear it using CAN_ClearFlag()
*             function. And after checking on an interrupt event you should 
*             clear it using CAN_ClearITPendingBit() function.            
*               
*              
*  \end{DoxyVerb}


\begin{DoxyAttention}{Attention}

\end{DoxyAttention}
\subsubsection*{\begin{center}\copyright C\-O\-P\-Y\-R\-I\-G\-H\-T 2012 S\-T\-Microelectronics\end{center} }

Licensed under M\-C\-D-\/\-S\-T Liberty S\-W License Agreement V2, (the \char`\"{}\-License\char`\"{}); You may not use this file except in compliance with the License. You may obtain a copy of the License at\-: \begin{DoxyVerb}   http://www.st.com/software_license_agreement_liberty_v2
\end{DoxyVerb}


Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \char`\"{}\-A\-S I\-S\char`\"{} B\-A\-S\-I\-S, W\-I\-T\-H\-O\-U\-T W\-A\-R\-R\-A\-N\-T\-I\-E\-S O\-R C\-O\-N\-D\-I\-T\-I\-O\-N\-S O\-F A\-N\-Y K\-I\-N\-D, either express or implied. See the License for the specific language governing permissions and limitations under the License. 

Definition in file \hyperlink{stm32f4xx__can_8c_source}{stm32f4xx\-\_\-can.\-c}.

