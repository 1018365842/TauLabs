<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>TauLabs: /home/jose/Code/guiTau/flight/Libraries/PyMite/vm/codeobj.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon_128x128.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">TauLabs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('codeobj_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">codeobj.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>CodeObj Type.  
<a href="#details">More...</a></p>

<p><a href="codeobj_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_pm_co__s.html">PmCo_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_pm_no__s.html">PmNo_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a453cc8c3f98681a6a9c859f9c9ad089a"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_pm_co__s.html">PmCo_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="codeobj_8h.html#a453cc8c3f98681a6a9c859f9c9ad089a">PmCo_t</a></td></tr>
<tr class="separator:a453cc8c3f98681a6a9c859f9c9ad089a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c4de4c22e1a1557978005cdbb2a351e"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_pm_co__s.html">PmCo_s</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="codeobj_8h.html#a0c4de4c22e1a1557978005cdbb2a351e">pPmCo_t</a></td></tr>
<tr class="separator:a0c4de4c22e1a1557978005cdbb2a351e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc3c8de2a05758fbbfd6e3324e3682cf"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_pm_no__s.html">PmNo_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="codeobj_8h.html#adc3c8de2a05758fbbfd6e3324e3682cf">PmNo_t</a></td></tr>
<tr class="separator:adc3c8de2a05758fbbfd6e3324e3682cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b9bed392d49e31f761cb095936fd5af"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_pm_no__s.html">PmNo_s</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="codeobj_8h.html#a5b9bed392d49e31f761cb095936fd5af">pPmNo_t</a></td></tr>
<tr class="separator:a5b9bed392d49e31f761cb095936fd5af"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa6f6a2e6b173994a159fd4b1d87baea5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pm_8h.html#a78d16e71b533f23ea2eaa9453f966d56">PmReturn_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="codeobj_8h.html#aa6f6a2e6b173994a159fd4b1d87baea5">co_loadFromImg</a> (<a class="el" href="mem_8h.html#a9c68f72c120fc5a782d464c144aafa2b">PmMemSpace_t</a> memspace, <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="el" href="group___n_a_m_e.html#ga7ae6d0e43244213b34de2c2b9aa30da6">const</a> **paddr, <a class="el" href="obj_8h.html#af293479fa3f9d92b941ee7445ad3960e">pPmObj_t</a> *r_pco)</td></tr>
<tr class="separator:aa6f6a2e6b173994a159fd4b1d87baea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e8607ce10fa100f91ff11717300787c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___n_a_m_e.html#ga18028b8badbf1ea7e704ccac3c488e82">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="codeobj_8h.html#a5e8607ce10fa100f91ff11717300787c">co_rSetCodeImgAddr</a> (<a class="el" href="codeobj_8h.html#a0c4de4c22e1a1557978005cdbb2a351e">pPmCo_t</a> pco, <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="el" href="group___n_a_m_e.html#ga7ae6d0e43244213b34de2c2b9aa30da6">const</a> *pimg)</td></tr>
<tr class="separator:a5e8607ce10fa100f91ff11717300787c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1fdd3b08e931b8412cb73f1e391a52a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pm_8h.html#a78d16e71b533f23ea2eaa9453f966d56">PmReturn_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="codeobj_8h.html#ac1fdd3b08e931b8412cb73f1e391a52a">no_loadFromImg</a> (<a class="el" href="mem_8h.html#a9c68f72c120fc5a782d464c144aafa2b">PmMemSpace_t</a> memspace, <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="el" href="group___n_a_m_e.html#ga7ae6d0e43244213b34de2c2b9aa30da6">const</a> **paddr, <a class="el" href="obj_8h.html#af293479fa3f9d92b941ee7445ad3960e">pPmObj_t</a> *r_pno)</td></tr>
<tr class="separator:ac1fdd3b08e931b8412cb73f1e391a52a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>CodeObj Type. </p>
<p>CodeObj type header. </p>

<p>Definition in file <a class="el" href="codeobj_8h_source.html">codeobj.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a453cc8c3f98681a6a9c859f9c9ad089a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_pm_co__s.html">PmCo_s</a>  <a class="el" href="codeobj_8h.html#a453cc8c3f98681a6a9c859f9c9ad089a">PmCo_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Code Object</p>
<p>An extended object that holds only the most frequently used parts of the static code image. Other parts can be obtained by inspecting the code image itself. </p>

</div>
</div>
<a class="anchor" id="adc3c8de2a05758fbbfd6e3324e3682cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_pm_no__s.html">PmNo_s</a>  <a class="el" href="codeobj_8h.html#adc3c8de2a05758fbbfd6e3324e3682cf">PmNo_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Native Code Object</p>
<p>An extended object that holds only the most frequently used parts of the static native image. Other parts can be obtained by inspecting the native image itself. </p>

</div>
</div>
<a class="anchor" id="a0c4de4c22e1a1557978005cdbb2a351e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_pm_co__s.html">PmCo_s</a>
 * <a class="el" href="codeobj_8h.html#a0c4de4c22e1a1557978005cdbb2a351e">pPmCo_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a5b9bed392d49e31f761cb095936fd5af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_pm_no__s.html">PmNo_s</a>
 * <a class="el" href="codeobj_8h.html#a5b9bed392d49e31f761cb095936fd5af">pPmNo_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aa6f6a2e6b173994a159fd4b1d87baea5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pm_8h.html#a78d16e71b533f23ea2eaa9453f966d56">PmReturn_t</a> co_loadFromImg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mem_8h.html#a9c68f72c120fc5a782d464c144aafa2b">PmMemSpace_t</a>&#160;</td>
          <td class="paramname"><em>memspace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="el" href="group___n_a_m_e.html#ga7ae6d0e43244213b34de2c2b9aa30da6">const</a> **&#160;</td>
          <td class="paramname"><em>paddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="obj_8h.html#af293479fa3f9d92b941ee7445ad3960e">pPmObj_t</a> *&#160;</td>
          <td class="paramname"><em>r_pco</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a CodeObj by loading info from a code image in memory.</p>
<p>An image is a static representation of a Python object. The process of converting an object to and from an image is also called marshalling. In PyMite, code images are the equivalent of .pyc files. Code images can only contain a select subset of object types (None, Int, Float, String, Slice?, Tuple, and CodeImg). All other types (Lists, Dicts, CodeObjs, Modules, Classes, Functions, ClassInstances) are built at runtime.</p>
<p>All multibyte values are in Little Endian order (least significant byte comes first in the byte stream).</p>
<p>memspace and *paddr determine the start of the code image. Load the code object with values from the code image, including the names and consts tuples. Leave contents of paddr pointing one byte past end of code img.</p>
<p>The code image has the following structure: -type: 8b - OBJ_TYPE_CIM -size: 16b - number of bytes the code image occupies. -argcount: 8b - number of arguments to this code obj. -stacksz: 8b - the maximum arg-stack size needed. -nlocals: 8b - number of local vars in the code obj. -names: Tuple - tuple of string objs. -consts: Tuple - tuple of objs. -code: 8b[] - bytecode array.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">memspace</td><td>memory space containing image </td></tr>
    <tr><td class="paramname">paddr</td><td>ptr to ptr to code img in memspace return by reference: paddr points one byte past end of code img </td></tr>
    <tr><td class="paramname">r_pco</td><td>Return arg. New code object with fields filled in. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return status </dd></dl>

<p>Definition at line <a class="el" href="codeobj_8c_source.html#l00033">33</a> of file <a class="el" href="codeobj_8c_source.html">codeobj.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5e8607ce10fa100f91ff11717300787c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___n_a_m_e.html#ga18028b8badbf1ea7e704ccac3c488e82">void</a> co_rSetCodeImgAddr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="codeobj_8h.html#a0c4de4c22e1a1557978005cdbb2a351e">pPmCo_t</a>&#160;</td>
          <td class="paramname"><em>pco</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="el" href="group___n_a_m_e.html#ga7ae6d0e43244213b34de2c2b9aa30da6">const</a> *&#160;</td>
          <td class="paramname"><em>pimg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Recursively sets image address of the CO and all its nested COs in its constant pool. This is done so that an image that was received during an interactive session will persist as long as any of its COs/funcs/objects is still alive.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pco</td><td>Pointer to root code object whose images are set </td></tr>
    <tr><td class="paramname">pimg</td><td>Pointer to very top of code image (PmodeImgObj) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="codeobj_8c_source.html#l00142">142</a> of file <a class="el" href="codeobj_8c_source.html">codeobj.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac1fdd3b08e931b8412cb73f1e391a52a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pm_8h.html#a78d16e71b533f23ea2eaa9453f966d56">PmReturn_t</a> no_loadFromImg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mem_8h.html#a9c68f72c120fc5a782d464c144aafa2b">PmMemSpace_t</a>&#160;</td>
          <td class="paramname"><em>memspace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="el" href="group___n_a_m_e.html#ga7ae6d0e43244213b34de2c2b9aa30da6">const</a> **&#160;</td>
          <td class="paramname"><em>paddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="obj_8h.html#af293479fa3f9d92b941ee7445ad3960e">pPmObj_t</a> *&#160;</td>
          <td class="paramname"><em>r_pno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a Native code object by loading a native image.</p>
<p>An image is a static representation of a Python object. A native image is much smaller than a regular image because only two items of data are needed after the type: the number of args the func expects and the index into the native function table. A reference to the image is not needed since it is just as efficient to store the info in RAM as it is to store a pointer and memspace value.</p>
<p>memspace and *paddr determine the start of the native image. Loads the argcount and the func index from the native object. Leaves contents of paddr pointing one byte past end of code img.</p>
<p>The native image has the following structure: -type: 8b - OBJ_TYPE_CIM -argcount: 8b - number of arguments to this code obj. -code: 16b - index into native function table.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">memspace</td><td>memory space containing image </td></tr>
    <tr><td class="paramname">paddr</td><td>ptr to ptr to code img in memspace (return) </td></tr>
    <tr><td class="paramname">r_pno</td><td>Return by reference, new code object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return status </dd></dl>

<p>Definition at line <a class="el" href="codeobj_8c_source.html#l00162">162</a> of file <a class="el" href="codeobj_8c_source.html">codeobj.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_1c0fe066ee3bbbff6911f1b6f0521ee4.html">flight</a></li><li class="navelem"><a class="el" href="dir_bf9e3ce02683c07e5d6503b15b0dd4ed.html">Libraries</a></li><li class="navelem"><a class="el" href="dir_c3daf86e73654d160a29f674fcbfeb18.html">PyMite</a></li><li class="navelem"><a class="el" href="dir_b97feb35ec146af579e623ad341e630f.html">vm</a></li><li class="navelem"><a class="el" href="codeobj_8h.html">codeobj.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
