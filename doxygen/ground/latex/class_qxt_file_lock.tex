\hypertarget{class_qxt_file_lock}{\section{Qxt\-File\-Lock Class Reference}
\label{class_qxt_file_lock}\index{Qxt\-File\-Lock@{Qxt\-File\-Lock}}
}


The \hyperlink{class_qxt_file_lock}{Qxt\-File\-Lock} class provides a crossplattform way to lock a Q\-File.  




{\ttfamily \#include $<$qxtfilelock.\-h$>$}

Inheritance diagram for Qxt\-File\-Lock\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_qxt_file_lock}
\end{center}
\end{figure}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835}{Mode} \{ \hyperlink{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835a86e726f4f6789c0de7340faffd11cd69}{Read\-Lock\-Wait}, 
\hyperlink{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835a223d75634f685f407b41e2ba89e0c455}{Read\-Lock}, 
\hyperlink{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835a45a077cb75b9087e319da24486005ba2}{Write\-Lock\-Wait}, 
\hyperlink{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835aa65a3bba221d8823412b16746b5a8c17}{Write\-Lock}
 \}
\begin{DoxyCompactList}\small\item\em The mode of the lock. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{class_qxt_file_lock_a84af0691c49c83fb6d3c3352c56ba48f}{lock} ()
\begin{DoxyCompactList}\small\item\em Locks the file Returns {\ttfamily true} if succeeds, {\ttfamily false} otherwise. \end{DoxyCompactList}\item 
bool \hyperlink{class_qxt_file_lock_ae9e31b41e41520c29cf64634d099cf05}{unlock} ()
\begin{DoxyCompactList}\small\item\em Unlocks the file. Returns {\ttfamily true} if succeeds, {\ttfamily false} otherwise. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_qxt_file_lock_abd47ac230f3f7119531d4efcfda30a97}{Qxt\-File\-Lock} (Q\-File $\ast$\hyperlink{class_qxt_file_lock_afeaea618cc084130c70c6b6f93b4b2f3}{file}, const \hyperlink{qxtfilelock_8h_af83497edef361523a95b06deda0b4c2d}{off\-\_\-t} \hyperlink{glext_8h_ae1b92ae085ddef4b1cdca7d749339fb0}{offset}, const \hyperlink{qxtfilelock_8h_af83497edef361523a95b06deda0b4c2d}{off\-\_\-t} \hyperlink{glext_8h_a3c8469415bbc83dd1341af15c67f1cef}{length}, const \hyperlink{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835}{Qxt\-File\-Lock\-::\-Mode} \hyperlink{glext_8h_a1e71d9c196e4683cc06c4b54d53f7ef5}{mode}=\hyperlink{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835a45a077cb75b9087e319da24486005ba2}{Write\-Lock\-Wait})
\item 
\hyperlink{class_qxt_file_lock_a314341b3e163001bffa6066d093e8898}{$\sim$\-Qxt\-File\-Lock} ()
\item 
\hyperlink{qxtfilelock_8h_af83497edef361523a95b06deda0b4c2d}{off\-\_\-t} \hyperlink{class_qxt_file_lock_a7b674bb5093f84389b4ed542d9c359d4}{offset} () const 
\item 
\hyperlink{qxtfilelock_8h_af83497edef361523a95b06deda0b4c2d}{off\-\_\-t} \hyperlink{class_qxt_file_lock_a7ad141d709ef8637e6ff9b16e1c6474e}{length} () const 
\item 
bool \hyperlink{class_qxt_file_lock_a0272626fd8af9ac7b5808fcd27f21260}{is\-Active} () const 
\item 
Q\-File $\ast$ \hyperlink{class_qxt_file_lock_afeaea618cc084130c70c6b6f93b4b2f3}{file} () const 
\item 
\hyperlink{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835}{Qxt\-File\-Lock\-::\-Mode} \hyperlink{class_qxt_file_lock_a4ce56493f542690f3eefa8ec25d293bf}{mode} () const 
\end{DoxyCompactItemize}


\subsection{Detailed Description}
The \hyperlink{class_qxt_file_lock}{Qxt\-File\-Lock} class provides a crossplattform way to lock a Q\-File. 

Qxt\-Core It supports the range locking of a file. The File will take parentship of the lock.\par
 The lock gets cleaned up with the Q\-File, and it is released when the Q\-File is closed.\par


Example usage\-: 
\begin{DoxyCode}
\hyperlink{qxtfilelock_8h_af83497edef361523a95b06deda0b4c2d}{off\_t} lockstart = 0x10;
\hyperlink{qxtfilelock_8h_af83497edef361523a95b06deda0b4c2d}{off\_t} locklength = 30

QFile \hyperlink{class_qxt_file_lock_afeaea618cc084130c70c6b6f93b4b2f3}{file}(\textcolor{stringliteral}{"test.lock"});

\textcolor{comment}{//the lock gets deleted when file is cleaned up}
\hyperlink{class_qxt_file_lock}{QxtFileLock} * writeLock = \textcolor{keyword}{new} \hyperlink{class_qxt_file_lock_abd47ac230f3f7119531d4efcfda30a97}{QxtFileLock}(&\hyperlink{class_qxt_file_lock_afeaea618cc084130c70c6b6f93b4b2f3}{file},lockstart,locklength,
      \hyperlink{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835aa65a3bba221d8823412b16746b5a8c17}{QxtFileLock::WriteLock});
\textcolor{keywordflow}{if}(\hyperlink{class_qxt_file_lock_afeaea618cc084130c70c6b6f93b4b2f3}{file}.open(QIODevice::ReadWrite))
\{
    \textcolor{keywordflow}{if}(writeLock->\hyperlink{class_qxt_file_lock_a84af0691c49c83fb6d3c3352c56ba48f}{lock}())
    \{
         \textcolor{comment}{// some write operations}
        writeLock->\hyperlink{class_qxt_file_lock_ae9e31b41e41520c29cf64634d099cf05}{unlock}();
    \}
     \textcolor{keywordflow}{else}
         \textcolor{comment}{//lock failed}
\}
\end{DoxyCode}
  \{Note\-:\} \hyperlink{class_qxt_file_lock}{Qxt\-File\-Lock} behaves different than normal unix locks on $\ast$nix. A thread can writelock the region of a file only O\-N\-C\-E if it uses two different handles. A different thread can not writelock a region that is owned by a other thread even if it is the S\-A\-M\-E process.  \{Note\-:\} On $\ast$nix this class uses fctnl to lock the file. This may not be compatible to other locking functions like flock and lockf  \{Note\-:\} Please do not mix \hyperlink{class_qxt_file_lock}{Qxt\-File\-Lock} and native file lock calls on the same Q\-File. The behaviour is undefined  \{Note\-:\} \hyperlink{class_qxt_file_lock}{Qxt\-File\-Lock} lives in the same thread as the passed Q\-File \begin{DoxyWarning}{Warning}
due to a refactoring issues of Q\-File this class will not work with Qt from version 4.\-3.\-0 to 4.\-3.\-2 
\end{DoxyWarning}


Definition at line 42 of file qxtfilelock.\-h.



\subsection{Member Enumeration Documentation}
\hypertarget{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835}{\index{Qxt\-File\-Lock@{Qxt\-File\-Lock}!Mode@{Mode}}
\index{Mode@{Mode}!QxtFileLock@{Qxt\-File\-Lock}}
\subsubsection[{Mode}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf Qxt\-File\-Lock\-::\-Mode}}}\label{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835}


The mode of the lock. 

Read\-Lock A non blocking read lock  Write\-Lock A non blocking write lock  Read\-Lock\-Wait A blocking read lock. The \hyperlink{class_qxt_file_lock_a84af0691c49c83fb6d3c3352c56ba48f}{lock()} function will block until the lock is created.  Write\-Lock\-Wait A blocking write lock. The \hyperlink{class_qxt_file_lock_a84af0691c49c83fb6d3c3352c56ba48f}{lock()} function will block until the lock is created. \begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{Read\-Lock\-Wait@{Read\-Lock\-Wait}!Qxt\-File\-Lock@{Qxt\-File\-Lock}}\index{Qxt\-File\-Lock@{Qxt\-File\-Lock}!Read\-Lock\-Wait@{Read\-Lock\-Wait}}\item[{\em 
\hypertarget{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835a86e726f4f6789c0de7340faffd11cd69}{Read\-Lock\-Wait}\label{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835a86e726f4f6789c0de7340faffd11cd69}
}]\index{Read\-Lock@{Read\-Lock}!Qxt\-File\-Lock@{Qxt\-File\-Lock}}\index{Qxt\-File\-Lock@{Qxt\-File\-Lock}!Read\-Lock@{Read\-Lock}}\item[{\em 
\hypertarget{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835a223d75634f685f407b41e2ba89e0c455}{Read\-Lock}\label{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835a223d75634f685f407b41e2ba89e0c455}
}]\index{Write\-Lock\-Wait@{Write\-Lock\-Wait}!Qxt\-File\-Lock@{Qxt\-File\-Lock}}\index{Qxt\-File\-Lock@{Qxt\-File\-Lock}!Write\-Lock\-Wait@{Write\-Lock\-Wait}}\item[{\em 
\hypertarget{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835a45a077cb75b9087e319da24486005ba2}{Write\-Lock\-Wait}\label{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835a45a077cb75b9087e319da24486005ba2}
}]\index{Write\-Lock@{Write\-Lock}!Qxt\-File\-Lock@{Qxt\-File\-Lock}}\index{Qxt\-File\-Lock@{Qxt\-File\-Lock}!Write\-Lock@{Write\-Lock}}\item[{\em 
\hypertarget{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835aa65a3bba221d8823412b16746b5a8c17}{Write\-Lock}\label{class_qxt_file_lock_a98ad3e1055038fd611ad64755f794835aa65a3bba221d8823412b16746b5a8c17}
}]\end{description}
\end{Desc}


Definition at line 48 of file qxtfilelock.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_qxt_file_lock_abd47ac230f3f7119531d4efcfda30a97}{\index{Qxt\-File\-Lock@{Qxt\-File\-Lock}!Qxt\-File\-Lock@{Qxt\-File\-Lock}}
\index{Qxt\-File\-Lock@{Qxt\-File\-Lock}!QxtFileLock@{Qxt\-File\-Lock}}
\subsubsection[{Qxt\-File\-Lock}]{\setlength{\rightskip}{0pt plus 5cm}Qxt\-File\-Lock\-::\-Qxt\-File\-Lock (
\begin{DoxyParamCaption}
\item[{Q\-File $\ast$}]{file, }
\item[{const {\bf off\-\_\-t}}]{offset, }
\item[{const {\bf off\-\_\-t}}]{length, }
\item[{const {\bf Qxt\-File\-Lock\-::\-Mode}}]{mode = {\ttfamily {\bf Write\-Lock\-Wait}}}
\end{DoxyParamCaption}
)}}\label{class_qxt_file_lock_abd47ac230f3f7119531d4efcfda30a97}
Contructs a new \hyperlink{class_qxt_file_lock}{Qxt\-File\-Lock}. The lock is not activated. {\itshape file} the file that should be locked {\itshape offset} the offset where the lock starts {\itshape length} the length of the lock {\itshape mode} the lockmode 

Definition at line 96 of file qxtfilelock.\-cpp.

\hypertarget{class_qxt_file_lock_a314341b3e163001bffa6066d093e8898}{\index{Qxt\-File\-Lock@{Qxt\-File\-Lock}!$\sim$\-Qxt\-File\-Lock@{$\sim$\-Qxt\-File\-Lock}}
\index{$\sim$\-Qxt\-File\-Lock@{$\sim$\-Qxt\-File\-Lock}!QxtFileLock@{Qxt\-File\-Lock}}
\subsubsection[{$\sim$\-Qxt\-File\-Lock}]{\setlength{\rightskip}{0pt plus 5cm}Qxt\-File\-Lock\-::$\sim$\-Qxt\-File\-Lock (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_qxt_file_lock_a314341b3e163001bffa6066d093e8898}
Destructs the file lock. 

Definition at line 108 of file qxtfilelock.\-cpp.



\subsection{Member Function Documentation}
\hypertarget{class_qxt_file_lock_afeaea618cc084130c70c6b6f93b4b2f3}{\index{Qxt\-File\-Lock@{Qxt\-File\-Lock}!file@{file}}
\index{file@{file}!QxtFileLock@{Qxt\-File\-Lock}}
\subsubsection[{file}]{\setlength{\rightskip}{0pt plus 5cm}Q\-File $\ast$ Qxt\-File\-Lock\-::file (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{class_qxt_file_lock_afeaea618cc084130c70c6b6f93b4b2f3}
Returns the file the lock is created on. 

Definition at line 140 of file qxtfilelock.\-cpp.

\hypertarget{class_qxt_file_lock_a0272626fd8af9ac7b5808fcd27f21260}{\index{Qxt\-File\-Lock@{Qxt\-File\-Lock}!is\-Active@{is\-Active}}
\index{is\-Active@{is\-Active}!QxtFileLock@{Qxt\-File\-Lock}}
\subsubsection[{is\-Active}]{\setlength{\rightskip}{0pt plus 5cm}bool Qxt\-File\-Lock\-::is\-Active (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{class_qxt_file_lock_a0272626fd8af9ac7b5808fcd27f21260}
Returns {\ttfamily true} if the lock is active otherwise it returns {\ttfamily false} 

Definition at line 124 of file qxtfilelock.\-cpp.

\hypertarget{class_qxt_file_lock_a7ad141d709ef8637e6ff9b16e1c6474e}{\index{Qxt\-File\-Lock@{Qxt\-File\-Lock}!length@{length}}
\index{length@{length}!QxtFileLock@{Qxt\-File\-Lock}}
\subsubsection[{length}]{\setlength{\rightskip}{0pt plus 5cm}{\bf off\-\_\-t} Qxt\-File\-Lock\-::length (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
) const}}\label{class_qxt_file_lock_a7ad141d709ef8637e6ff9b16e1c6474e}
Returns the length of the lock 

Definition at line 132 of file qxtfilelock.\-cpp.

\hypertarget{class_qxt_file_lock_a84af0691c49c83fb6d3c3352c56ba48f}{\index{Qxt\-File\-Lock@{Qxt\-File\-Lock}!lock@{lock}}
\index{lock@{lock}!QxtFileLock@{Qxt\-File\-Lock}}
\subsubsection[{lock}]{\setlength{\rightskip}{0pt plus 5cm}bool Qxt\-File\-Lock\-::lock (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{class_qxt_file_lock_a84af0691c49c83fb6d3c3352c56ba48f}


Locks the file Returns {\ttfamily true} if succeeds, {\ttfamily false} otherwise. 



Definition at line 182 of file qxtfilelock\-\_\-unix.\-cpp.

\hypertarget{class_qxt_file_lock_a4ce56493f542690f3eefa8ec25d293bf}{\index{Qxt\-File\-Lock@{Qxt\-File\-Lock}!mode@{mode}}
\index{mode@{mode}!QxtFileLock@{Qxt\-File\-Lock}}
\subsubsection[{mode}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Qxt\-File\-Lock\-::\-Mode} Qxt\-File\-Lock\-::mode (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{class_qxt_file_lock_a4ce56493f542690f3eefa8ec25d293bf}
Returns the mode of the lock 

Definition at line 148 of file qxtfilelock.\-cpp.

\hypertarget{class_qxt_file_lock_a7b674bb5093f84389b4ed542d9c359d4}{\index{Qxt\-File\-Lock@{Qxt\-File\-Lock}!offset@{offset}}
\index{offset@{offset}!QxtFileLock@{Qxt\-File\-Lock}}
\subsubsection[{offset}]{\setlength{\rightskip}{0pt plus 5cm}{\bf off\-\_\-t} Qxt\-File\-Lock\-::offset (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{class_qxt_file_lock_a7b674bb5093f84389b4ed542d9c359d4}
Returns the offset of the lock 

Definition at line 116 of file qxtfilelock.\-cpp.

\hypertarget{class_qxt_file_lock_ae9e31b41e41520c29cf64634d099cf05}{\index{Qxt\-File\-Lock@{Qxt\-File\-Lock}!unlock@{unlock}}
\index{unlock@{unlock}!QxtFileLock@{Qxt\-File\-Lock}}
\subsubsection[{unlock}]{\setlength{\rightskip}{0pt plus 5cm}bool Qxt\-File\-Lock\-::unlock (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{class_qxt_file_lock_ae9e31b41e41520c29cf64634d099cf05}


Unlocks the file. Returns {\ttfamily true} if succeeds, {\ttfamily false} otherwise. 



Definition at line 151 of file qxtfilelock\-\_\-unix.\-cpp.



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
/home/jose/\-Code/gui\-Tau/ground/gcs/src/libs/libqxt/src/core/\hyperlink{qxtfilelock_8h}{qxtfilelock.\-h}\item 
/home/jose/\-Code/gui\-Tau/ground/gcs/src/libs/libqxt/src/core/\hyperlink{qxtfilelock_8cpp}{qxtfilelock.\-cpp}\item 
/home/jose/\-Code/gui\-Tau/ground/gcs/src/libs/libqxt/src/core/\hyperlink{qxtfilelock__unix_8cpp}{qxtfilelock\-\_\-unix.\-cpp}\item 
/home/jose/\-Code/gui\-Tau/ground/gcs/src/libs/libqxt/src/core/\hyperlink{qxtfilelock__win_8cpp}{qxtfilelock\-\_\-win.\-cpp}\end{DoxyCompactItemize}
