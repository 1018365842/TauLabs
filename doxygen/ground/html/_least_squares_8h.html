<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>TauLabs: /home/jose/Code/guiTau/ground/gcs/src/libs/eigen/Eigen/src/LeastSquares/LeastSquares.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon_128x128.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">TauLabs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_least_squares_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">LeastSquares.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="_least_squares_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1db4d54588a78e71f46394f57b4252bd"><td class="memTemplParams" colspan="2">template&lt;typename VectorType &gt; </td></tr>
<tr class="memitem:a1db4d54588a78e71f46394f57b4252bd"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group___u_a_v_objects_plugin.html#ga444cf2ff3f0ecbe028adce838d373f5c">void</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="_least_squares_8h.html#a1db4d54588a78e71f46394f57b4252bd">linearRegression</a> (<a class="el" href="ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> numPoints, VectorType **<a class="el" href="glext_8h.html#ae75d9f560170dfeaadc8718c87f5fbec">points</a>, VectorType *<a class="el" href="qxtslotjob_8h.html#aab161efab0511ea9612b64c40e9852ca">result</a>, <a class="el" href="ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> funcOfOthers)</td></tr>
<tr class="separator:a1db4d54588a78e71f46394f57b4252bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cb0dfbfaedfe2fa9c60678b5cf53b56"><td class="memTemplParams" colspan="2">template&lt;typename VectorType , typename HyperplaneType &gt; </td></tr>
<tr class="memitem:a5cb0dfbfaedfe2fa9c60678b5cf53b56"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group___u_a_v_objects_plugin.html#ga444cf2ff3f0ecbe028adce838d373f5c">void</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="_least_squares_8h.html#a5cb0dfbfaedfe2fa9c60678b5cf53b56">fitHyperplane</a> (<a class="el" href="ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> numPoints, VectorType **<a class="el" href="glext_8h.html#ae75d9f560170dfeaadc8718c87f5fbec">points</a>, HyperplaneType *<a class="el" href="qxtslotjob_8h.html#aab161efab0511ea9612b64c40e9852ca">result</a>, typename <a class="el" href="struct_num_traits.html">NumTraits</a>&lt; typename VectorType::Scalar &gt;::Real *soundness=0)</td></tr>
<tr class="separator:a5cb0dfbfaedfe2fa9c60678b5cf53b56"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a5cb0dfbfaedfe2fa9c60678b5cf53b56"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename VectorType , typename HyperplaneType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___u_a_v_objects_plugin.html#ga444cf2ff3f0ecbe028adce838d373f5c">void</a> fitHyperplane </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>numPoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorType **&#160;</td>
          <td class="paramname"><em>points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HyperplaneType *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">typename <a class="el" href="struct_num_traits.html">NumTraits</a>&lt; typename VectorType::Scalar &gt;::Real *&#160;</td>
          <td class="paramname"><em>soundness</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is quite similar to <a class="el" href="_least_squares_8h.html#a1db4d54588a78e71f46394f57b4252bd">linearRegression()</a>, so we refer to the documentation of this function and only list here the differences.</p>
<p>The main difference from <a class="el" href="_least_squares_8h.html#a1db4d54588a78e71f46394f57b4252bd">linearRegression()</a> is that this function doesn't take a <em>funcOfOthers</em> argument. Instead, it finds a general equation of the form </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ r_0 x_0 + \cdots + r_{n-1}x_{n-1} + r_n = 0, \]" src="form_40.png"/>
</p>
<p> where <img class="formulaInl" alt="$n=Size$" src="form_35.png"/>, <img class="formulaInl" alt="$r_i=retCoefficients[i]$" src="form_41.png"/>, and we denote by <img class="formulaInl" alt="$x_0,\ldots,x_{n-1}$" src="form_38.png"/> the n coordinates in the n-dimensional space.</p>
<p>Thus, the vector <em>retCoefficients</em> has size <img class="formulaInl" alt="$n+1$" src="form_42.png"/>, which is another difference from <a class="el" href="_least_squares_8h.html#a1db4d54588a78e71f46394f57b4252bd">linearRegression()</a>.</p>
<p>In practice, this function performs an hyper-plane fit in a total least square sense via the following steps: 1 - center the data to the mean 2 - compute the covariance matrix 3 - pick the eigenvector corresponding to the smallest eigenvalue of the covariance matrix The ratio of the smallest eigenvalue and the second one gives us a hint about the relevance of the solution. This value is optionally returned in <em>soundness</em>.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="_least_squares_8h.html#a1db4d54588a78e71f46394f57b4252bd">linearRegression()</a> </dd></dl>

<p>Definition at line <a class="el" href="_least_squares_8h_source.html#l00143">143</a> of file <a class="el" href="_least_squares_8h_source.html">LeastSquares.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1db4d54588a78e71f46394f57b4252bd"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename VectorType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___u_a_v_objects_plugin.html#ga444cf2ff3f0ecbe028adce838d373f5c">void</a> linearRegression </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>numPoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorType **&#160;</td>
          <td class="paramname"><em>points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VectorType *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>funcOfOthers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For a set of points, this function tries to express one of the coords as a linear (affine) function of the other coords.</p>
<p>This is best explained by an example. This function works in full generality, for points in a space of arbitrary dimension, and also over the complex numbers, but for this example we will work in dimension 3 over the real numbers (doubles).</p>
<p>So let us work with the following set of 5 points given by their <img class="formulaInl" alt="$(x,y,z)$" src="form_22.png"/> coordinates: </p>
<div class="fragment"><div class="line">Vector3d <a class="code" href="glext_8h.html#ae75d9f560170dfeaadc8718c87f5fbec">points</a>[5];</div>
<div class="line"><a class="code" href="glext_8h.html#ae75d9f560170dfeaadc8718c87f5fbec">points</a>[0] = Vector3d( 3.02, 6.89, -4.32 );</div>
<div class="line"><a class="code" href="glext_8h.html#ae75d9f560170dfeaadc8718c87f5fbec">points</a>[1] = Vector3d( 2.01, 5.39, -3.79 );</div>
<div class="line"><a class="code" href="glext_8h.html#ae75d9f560170dfeaadc8718c87f5fbec">points</a>[2] = Vector3d( 2.41, 6.01, -4.01 );</div>
<div class="line"><a class="code" href="glext_8h.html#ae75d9f560170dfeaadc8718c87f5fbec">points</a>[3] = Vector3d( 2.09, 5.55, -3.86 );</div>
<div class="line"><a class="code" href="glext_8h.html#ae75d9f560170dfeaadc8718c87f5fbec">points</a>[4] = Vector3d( 2.58, 6.32, -4.10 );</div>
</div><!-- fragment --><p> Suppose that we want to express the second coordinate ( <img class="formulaInl" alt="$y$" src="form_23.png"/>) as a linear expression in <img class="formulaInl" alt="$x$" src="form_24.png"/> and <img class="formulaInl" alt="$z$" src="form_25.png"/>, that is, </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ y=ax+bz+c \]" src="form_26.png"/>
</p>
<p> for some constants <img class="formulaInl" alt="$a,b,c$" src="form_27.png"/>. Thus, we want to find the best possible constants <img class="formulaInl" alt="$a,b,c$" src="form_27.png"/> so that the plane of equation <img class="formulaInl" alt="$y=ax+bz+c$" src="form_28.png"/> fits best the five above points. To do that, call this function as follows: </p>
<div class="fragment"><div class="line">Vector3d coeffs; <span class="comment">// will store the coefficients a, b, c</span></div>
<div class="line"><a class="code" href="_least_squares_8h.html#a1db4d54588a78e71f46394f57b4252bd">linearRegression</a>(</div>
<div class="line">  5,</div>
<div class="line">  &amp;<a class="code" href="glext_8h.html#ae75d9f560170dfeaadc8718c87f5fbec">points</a>,</div>
<div class="line">  &amp;coeffs,</div>
<div class="line">  1 <span class="comment">// the coord to express as a function of</span></div>
<div class="line">    <span class="comment">// the other ones. 0 means x, 1 means y, 2 means z.</span></div>
<div class="line">);</div>
</div><!-- fragment --><p> Now the vector <em>coeffs</em> is approximately <img class="formulaInl" alt="$( 0.495 , -1.927 , -2.906 )$" src="form_29.png"/>. Thus, we get <img class="formulaInl" alt="$a=0.495, b = -1.927, c = -2.906$" src="form_30.png"/>. Let us check for instance how near points[0] is from the plane of equation <img class="formulaInl" alt="$y=ax+bz+c$" src="form_28.png"/>. Looking at the coords of points[0], we see that: </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ax+bz+c = 0.495 * 3.02 + (-1.927) * (-4.32) + (-2.906) = 6.91.\]" src="form_31.png"/>
</p>
<p> On the other hand, we have <img class="formulaInl" alt="$y=6.89$" src="form_32.png"/>. We see that the values <img class="formulaInl" alt="$6.91$" src="form_33.png"/> and <img class="formulaInl" alt="$6.89$" src="form_34.png"/> are near, so points[0] is very near the plane of equation <img class="formulaInl" alt="$y=ax+bz+c$" src="form_28.png"/>.</p>
<p>Let's now describe precisely the parameters: </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numPoints</td><td>the number of points </td></tr>
    <tr><td class="paramname">points</td><td>the array of pointers to the points on which to perform the linear regression </td></tr>
    <tr><td class="paramname">result</td><td>pointer to the vector in which to store the result. This vector must be of the same type and size as the data points. The meaning of its coords is as follows. For brevity, let <img class="formulaInl" alt="$n=Size$" src="form_35.png"/>, <img class="formulaInl" alt="$r_i=result[i]$" src="form_36.png"/>, and <img class="formulaInl" alt="$f=funcOfOthers$" src="form_37.png"/>. Denote by <img class="formulaInl" alt="$x_0,\ldots,x_{n-1}$" src="form_38.png"/> the n coordinates in the n-dimensional space. Then the resulting equation is: <p class="formulaDsp">
<img class="formulaDsp" alt="\[ x_f = r_0 x_0 + \cdots + r_{f-1}x_{f-1} + r_{f+1}x_{f+1} + \cdots + r_{n-1}x_{n-1} + r_n. \]" src="form_39.png"/>
</p>
 </td></tr>
    <tr><td class="paramname">funcOfOthers</td><td>Determines which coord to express as a function of the others. Coords are numbered starting from 0, so that a value of 0 means <img class="formulaInl" alt="$x$" src="form_24.png"/>, 1 means <img class="formulaInl" alt="$y$" src="form_23.png"/>, 2 means <img class="formulaInl" alt="$z$" src="form_25.png"/>, ...</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="_least_squares_8h.html#a5cb0dfbfaedfe2fa9c60678b5cf53b56">fitHyperplane()</a> </dd></dl>

<p>Definition at line <a class="el" href="_least_squares_8h_source.html#l00098">98</a> of file <a class="el" href="_least_squares_8h_source.html">LeastSquares.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_7d479060bd63f97a5f55118dc1bf445f.html">ground</a></li><li class="navelem"><a class="el" href="dir_8190115ebf6241364e9fcffd2d3bb119.html">gcs</a></li><li class="navelem"><a class="el" href="dir_7974bb65cda28014c42e19f1e22d32eb.html">src</a></li><li class="navelem"><a class="el" href="dir_7636f49081cf0a6431416073121dee44.html">libs</a></li><li class="navelem"><a class="el" href="dir_29897d1c978bda77b4f879919131b9c1.html">eigen</a></li><li class="navelem"><a class="el" href="dir_70c0dccc8e880a57759418771739bba4.html">Eigen</a></li><li class="navelem"><a class="el" href="dir_9cea0cb22c83cb67a65159bc0c582de0.html">src</a></li><li class="navelem"><a class="el" href="dir_706a392fc8d9bce8a865c42ba685ce82.html">LeastSquares</a></li><li class="navelem"><a class="el" href="_least_squares_8h.html">LeastSquares.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
